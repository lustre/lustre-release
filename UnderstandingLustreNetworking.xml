<?xml version='1.0' encoding='UTF-8'?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en-US" xml:id="understandinglustrenetworking">
  <title xml:id="understandinglustrenetworking.title">Understanding Lustre Networking (LNET)</title>
  <para>This chapter introduces Lustre networking (LNET). It includes the following sections:</para>
  <itemizedlist>
    <listitem>
      <para>
                <xref linkend="dbdoclet.50438191_22878"/>
            </para>
    </listitem>
    <listitem>
      <para>                           
                <xref linkend="dbdoclet.50438191_19625"/>
            </para>
    </listitem>
    <listitem>
      <para><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="idp694976"/></para>
    </listitem>
    <listitem>
      <para>
                <xref linkend="dbdoclet.50438191_20721"/>
            </para>
    </listitem>
  </itemizedlist>
  <section xml:id="dbdoclet.50438191_22878">
    <title><indexterm>
        <primary>LNET</primary>
      </indexterm><indexterm>
        <primary>LNET</primary>
        <secondary>understanding</secondary>
      </indexterm> Introducing LNET</title>
    <para>In a cluster using one or more Lustre file systems, the network communication
      infrastructure required by the Lustre file system is implemented using the Lustre networking
      (LNET) feature.</para>
    <para>LNET supports many commonly-used network types, such as InfiniBand and IP networks, and
      allows simultaneous availability across multiple network types with routing between them.
      Remote direct memory access (RDMA) is permitted when supported by underlying networks using
      the appropriate Lustre network driver (LND). High availability and recovery features enable
      transparent recovery in conjunction with failover servers.</para>
    <para>An LND is a pluggable driver that provides support for a particular network type, for
      example <literal>ksocklnd</literal> is the driver which implements the TCP Socket LND that
      supports TCP networks. LNDs are loaded into the driver stack, with one LND for each network
      type in use.</para>
    <para>For information about configuring LNET, see <xref linkend="configuringlnet"/>.</para>
    <para>For information about administering LNET, see <xref linkend="adminlustrepart3"/>.</para>
  </section>
  <section xml:id="dbdoclet.50438191_19625">
    <title><indexterm>
        <primary>LNET</primary>
        <secondary>features</secondary>
      </indexterm>Key Features of LNET</title>
    <para>Key features of LNET include:</para>
    <itemizedlist>
      <listitem>
        <para>RDMA, when supported by underlying networks</para>
      </listitem>
      <listitem>
        <para>Support for many commonly-used network types</para>
      </listitem>
      <listitem>
        <para>High availability and recovery</para>
      </listitem>
      <listitem>
        <para>Support of multiple network types simultaneously</para>
      </listitem>
      <listitem>
        <para>Routing among disparate networks</para>
      </listitem>
    </itemizedlist>
    <para>LNET permits end-to-end read/write throughput at or near peak bandwidth rates on a variety
      of network interconnects.</para>
  </section>
  <section xml:id="idp694976">
    <title><indexterm>
        <primary>Lustre</primary>
        <secondary>Networks</secondary>
      </indexterm>Lustre Networks</title>
    <para>A Lustre network is comprised of clients and servers running the Lustre software. It need
      not be confined to one LNET subnet but can span several networks provided routing is possible
      between the networks. In a similar manner, a single network can have multiple LNET subnets. </para>
    <para>The Lustre networking stack is comprised of two layers, the LNET code module and the LND.
      The LNET layer operates above the LND layer in a manner similar to the way the network layer
      operates above the data link layer. LNET layer is connectionless, asynchronous and does not
      verify that data has been transmitted while the LND layer is connection oriented and typically
      does verify data transmission.</para>
    <para>LNETs are uniquely identified by a label comprised of a string corresponding to an LND and
      a number, such as tcp0, o2ib0, or o2ib1, that uniquely identifies each LNET. Each node on an
      LNET has at least one network identifier (NID). A NID is a combination of the address of the
      network interface and the LNET label in the
          form:<literal><replaceable>address</replaceable>@<replaceable>LNET_label</replaceable></literal>.</para>
    <para>Examples: <screen>192.168.1.2@tcp0
10.13.24.90@o2ib1</screen></para>
    <para>In certain circumstances it might be desirable for Lustre file system traffic to pass
      between multiple LNETs. This is possible using LNET routing. It is important to realize that
      LNET routing is not the same as network routing. For more details about LNET routing, see
        <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="configuringlnet"/></para>
  </section>
  <section xml:id="dbdoclet.50438191_20721">
    <title><indexterm>
        <primary>LNET</primary>
        <secondary>supported networks</secondary>
      </indexterm>Supported Network Types</title>
    <para>The LNET code module includes LNDs to support many network types including:</para>
    <itemizedlist>
      <listitem>
        <para> InfiniBand: OpenFabrics OFED (o2ib)</para>
      </listitem>
      <listitem>
        <para> TCP (any network carrying TCP traffic, including GigE, 10GigE, and IPoIB)</para>
      </listitem>
      <listitem>
        <para> Cray: Seastar</para>
      </listitem>
      <listitem>
        <para> Myrinet: MX</para>
      </listitem>
      <listitem>
        <para> RapidArray: ra</para>
      </listitem>
      <listitem>
        <para> Quadrics: Elan</para>
      </listitem>
    </itemizedlist>
  </section>
</chapter>
