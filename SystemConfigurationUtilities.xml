<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:lang="en-US" xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" xml:id='systemconfigurationutilities'>
  <info>
    <title xml:id='systemconfigurationutilities.title'>System Configuration Utilities</title>
  </info>

  <para><anchor xml:id="dbdoclet.50438219_pgfId-1294056" xreflabel=""/>This chapter includes system configuration utilities and includes the following sections:</para>
  <itemizedlist><listitem>
      <para><xref linkend="dbdoclet.50438219_55923"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_76969"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_38274"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_58217"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_44971"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_84890"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_90386"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_23232"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_23648"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_64286"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_90218"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_54734"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_63667"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_75432"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_12635"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_82679"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_51496"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_39574"/></para>
    </listitem>

<listitem>
      <para><xref linkend="dbdoclet.50438219_99928"/></para>
    </listitem>

</itemizedlist>
    <section xml:id="dbdoclet.50438219_55923">
      <title>36.1 e2<anchor xml:id="dbdoclet.50438219_marker-1317398" xreflabel=""/>scan</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317400" xreflabel=""/>The e2scan utility is an ext2 file system-modified inode scan program. The e2scan program uses libext2fs to find inodes with ctime or mtime newer than a given time and prints out their pathname. Use e2scan to efficiently generate lists of files that have been modified. The e2scan tool is included in the e2fsprogs package, located at:</para>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317402" xreflabel=""/><link xl:href="http://downloads.lustre.org/public/tools/e2fsprogs/">http://downloads.lustre.org/public/tools/e2fsprogs/</link></para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317403" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317404" xreflabel=""/>e2scan [options] [-f file] block_device
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317405" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317406" xreflabel=""/>When invoked, the e2scan utility iterates all inodes on the block device, finds modified inodes, and prints their inode numbers. A similar iterator, using libext2fs(5), builds a table (called parent database) which lists the parent node for each inode. With a lookup function, you can reconstruct modified pathnames from root.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317430" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317409" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317411" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317413" xreflabel=""/><emphasis role="bold">-b inode buffer blocks</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317415" xreflabel=""/>Sets the readahead inode blocks to get excellent performance when scanning the block device.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317416" xreflabel=""/> </para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317418" xreflabel=""/><emphasis role="bold">-o output file</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317420" xreflabel=""/>If an output file is specified, modified pathnames are written to this file. Otherwise, modified parameters are written to stdout.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317422" xreflabel=""/><emphasis role="bold">-t inode | pathname</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317424" xreflabel=""/>Sets the e2scan type if type is inode. The e2scan utility prints modified inode numbers to stdout. By default, the type is set as pathname.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317425" xreflabel=""/>The e2scan utility lists modified pathnames based on modified inode numbers.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317427" xreflabel=""/><emphasis role="bold">-u</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317429" xreflabel=""/>Rebuilds the parent database from scratch. Otherwise, the current parent database is used.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_76969">
      <title>36.2 l_<anchor xml:id="dbdoclet.50438219_marker-1318227" xreflabel=""/>getidentity</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1318229" xreflabel=""/>The l_getidentity utility handles Lustre user / group cache upcall.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318230" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318231" xreflabel=""/>l_getidentity {mdtname} {uid}
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318232" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318233" xreflabel=""/>The group upcall file contains the path to an executable file that, when properly installed, is invoked to resolve a numeric UID to a group membership list. This utility should complete the mds_grp_downcall_data structure and write it to the /proc/fs/lustre/mdt/${FSNAME}-MDT{xxxx}/identity_info pseudo-file.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318234" xreflabel=""/>The l_getidentity utility is the reference implementation of the user or group cache upcall.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318248" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318237" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318239" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318241" xreflabel=""/><emphasis role="bold">mdtname</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318243" xreflabel=""/>Metadata server target name</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318245" xreflabel=""/><emphasis role="bold">uid</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318247" xreflabel=""/>User identifier</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318249" xreflabel=""/>Files</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318250" xreflabel=""/>The l_getidentity files are located at:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318251" xreflabel=""/>/proc/fs/lustre/mdt/${FSNAME}-MDT{xxxx}/identity_upcall
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_38274">
      <title>36.3 lc<anchor xml:id="dbdoclet.50438219_marker-1302539" xreflabel=""/>tl</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1302541" xreflabel=""/>The lctl utility is used for root control and configuration. With lctl you can directly control Lustre via an ioctl interface, allowing various configuration, maintenance and debugging features to be accessed.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1294259" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314608" xreflabel=""/>lctl
<anchor xml:id="dbdoclet.50438219_pgfId-1314609" xreflabel=""/>lctl --device &lt;devno&gt;<emphasis/>&lt;command [args]&gt;
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1314610" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314611" xreflabel=""/>The lctl utility can be invoked in interactive mode by issuing the lctl command. After that, commands are issued as shown below. The most common lctl commands are:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314612" xreflabel=""/>dl
<anchor xml:id="dbdoclet.50438219_pgfId-1314613" xreflabel=""/>dk
<anchor xml:id="dbdoclet.50438219_pgfId-1314614" xreflabel=""/>device
<anchor xml:id="dbdoclet.50438219_pgfId-1314615" xreflabel=""/>network &lt;<emphasis>up/down</emphasis>&gt;
<anchor xml:id="dbdoclet.50438219_pgfId-1314616" xreflabel=""/>list_nids
<anchor xml:id="dbdoclet.50438219_pgfId-1314617" xreflabel=""/>ping <emphasis>nid</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1314618" xreflabel=""/>help
<anchor xml:id="dbdoclet.50438219_pgfId-1314619" xreflabel=""/>quit
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314620" xreflabel=""/>For a complete list of available commands, type help at the lctl prompt. To get basic help on command meaning and syntax, type help<emphasis>command</emphasis>. Command completion is activated with the TAB key, and command history is available via the up- and down-arrow keys.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314621" xreflabel=""/>For non-interactive use, use the second invocation, which runs the command after connecting to the device.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1311076" xreflabel=""/>Setting Parameters with lctl</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314629" xreflabel=""/>Lustre parameters are not always accessible using the procfs interface, as it is platform-specific. As a solution, lctl {get,set}_param has been introduced as a platform-independent interface to the Lustre tunables. Avoid direct references to /proc/{fs,sys}/{lustre,lnet}. For future portability, use lctl {get,set}_param .</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314630" xreflabel=""/>When the file system is running, use the lctl set_param command to set temporary parameters (mapping to items in /proc/{fs,sys}/{lnet,lustre}). The lctl set_param command uses this syntax:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314631" xreflabel=""/>lctl set_param [-n] &lt;obdtype&gt;.&lt;obdname&gt;.&lt;proc_file_name&gt;=&lt;value&gt;
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314632" xreflabel=""/>For example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314633" xreflabel=""/>$ lctl set_param ldlm.namespaces.*osc*.lru_size=$((NR_CPU*100))
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314634" xreflabel=""/>Many permanent parameters can be set with lctl conf_param. In general, lctl conf_param can be used to specify any parameter settable in a /proc/fs/lustre file, with its own OBD device. The lctl conf_param command uses this syntax:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314635" xreflabel=""/>&lt;obd|fsname&gt;.&lt;obdtype&gt;.&lt;proc_file_name&gt;=&lt;value&gt;) 
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314636" xreflabel=""/>For example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314637" xreflabel=""/>$ lctl conf_param testfs-MDT0000.mdt.group_upcall=NONE 
<anchor xml:id="dbdoclet.50438219_pgfId-1314638" xreflabel=""/>$ lctl conf_param testfs.llite.max_read_ahead_mb=16 
</screen>
        <informaltable frame="none">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="5*"/>
            <colspec colname="c2" colwidth="95*"/>
            
            
            <tbody>
              <row>
                <entry><para><inlinemediaobject><imageobject role="html">
                        <imagedata fileref="./shared/caution.gif" scalefit="1"/>
                      </imageobject>
<imageobject role="fo">
                        <imagedata contentdepth="100%" contentwidth="" depth="" fileref="./shared/caution.gif" scalefit="1" width="100%"/>
                      </imageobject>
</inlinemediaobject></para></entry>
                <entry><para><emphasis role="bold">Caution -</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1314639" xreflabel=""/>The lctlconf_param command permanently sets parameters in the file system configuration.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1314640" xreflabel=""/>To get current Lustre parameter settings, use the lctl get_param command with this syntax:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314641" xreflabel=""/>lctl get_param [-n] &lt;obdtype&gt;.&lt;obdname&gt;.&lt;proc_file_name&gt;
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1314642" xreflabel=""/>For example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314643" xreflabel=""/>$ lctl get_param -n ost.*.ost_io.timeouts 
</screen>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1314644" xreflabel=""/>To list Lustre parameters that are available to set, use the lctl list_param command, with this syntax:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1311097" xreflabel=""/>lctl list_param [-n] &lt;obdtype&gt;.&lt;obdname&gt;
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1311098" xreflabel=""/>For example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1314652" xreflabel=""/>$ lctl list_param obdfilter.lustre-OST0000
</screen>
<para><anchor xml:id="dbdoclet.50438219_pgfId-1314653" xreflabel=""/>For more information on using lctl to set temporary and permanent parameters, see <xref linkend="dbdoclet.50438194_51490"/> (Setting Parameters with lctl).</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1302704" xreflabel=""/><emphasis role="bold">Network Configuration</emphasis></para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1304902" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1304907" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314664" xreflabel=""/><emphasis role="bold">network</emphasis> &lt;<emphasis>up/down</emphasis>&gt;|&lt;<emphasis>tcp/elan/myrinet</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314668" xreflabel=""/>Starts or stops LNET, or selects a network type for other <emphasis role="bold">lctl</emphasis> LNET commands.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314670" xreflabel=""/><emphasis role="bold">list_nids</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314674" xreflabel=""/>Prints all NIDs on the local node. LNET must be running.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314676" xreflabel=""/><emphasis role="bold">which_nid</emphasis> &lt;<emphasis>nidlist</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314680" xreflabel=""/>From a list of NIDs for a remote node, identifies the NID on which interface communication will occur.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314682" xreflabel=""/><emphasis role="bold">ping</emphasis> &lt;<emphasis>nid</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314686" xreflabel=""/>Checks LNET connectivity via an LNET ping. This uses the fabric appropriate to the specified NID.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314692" xreflabel=""/><emphasis role="bold">interface_list</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314696" xreflabel=""/>Prints the network interface information for a given <emphasis role="bold">network</emphasis> type.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314698" xreflabel=""/><emphasis role="bold">peer_list</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314702" xreflabel=""/>Prints the known peers for a given <emphasis role="bold">network</emphasis> type.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314704" xreflabel=""/><emphasis role="bold">conn_list</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314708" xreflabel=""/>Prints all the connected remote NIDs for a given <emphasis role="bold">network</emphasis> type.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314710" xreflabel=""/><emphasis role="bold">active_tx</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314714" xreflabel=""/>This command prints active transmits. It is only used for the Elan <emphasis role="bold">network</emphasis> type.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314716" xreflabel=""/><emphasis role="bold">route_list</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314720" xreflabel=""/>Prints the complete routing table.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1312839" xreflabel=""/><emphasis role="bold">Device Selection</emphasis></para>
        <informaltable frame="all">
          <tgroup cols="3">
            <colspec colname="c1" colwidth="33*"/>
            <colspec colname="c2" colwidth="33*"/>
            <colspec colname="c3" colwidth="33*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1312822" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1312824" xreflabel=""/> </emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1312826" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314726" xreflabel=""/><emphasis role="bold">device</emphasis> &lt;<emphasis>devname</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314728" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314730" xreflabel=""/>This selects the specified OBD device. All other commands depend on the device being set.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314732" xreflabel=""/><emphasis role="bold">device_list</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314734" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314736" xreflabel=""/>Shows the local Lustre OBDs, a/k/a <emphasis role="bold">dl</emphasis>.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1312818" xreflabel=""/><emphasis role="bold">Device Operations</emphasis></para>
        <informaltable frame="all">
          <tgroup cols="3">
            <colspec colname="c1" colwidth="33*"/>
            <colspec colname="c2" colwidth="33*"/>
            <colspec colname="c3" colwidth="33*"/>
            <thead>
              <row>
                <entry nameend="c2" namest="c1"><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1313502" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1313506" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314742" xreflabel=""/><emphasis role="bold">list_param</emphasis><emphasis>[-F|-R]</emphasis> &lt;<emphasis>param_path ...</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314746" xreflabel=""/>Lists the Lustre or LNET parameter name.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1314747" xreflabel=""/> </para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314749" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314751" xreflabel=""/>-<emphasis role="bold">F</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314753" xreflabel=""/>Adds &apos;/&apos;, &apos;@&apos; or &apos;=&apos; for directories, symlinks and writeable files, respectively.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314755" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314757" xreflabel=""/>-<emphasis role="bold">R</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314759" xreflabel=""/>Recursively lists all parameters under the specified path. If <emphasis>param_path</emphasis> is unspecified, all parameters are shown.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314765" xreflabel=""/><emphasis role="bold">get_param</emphasis><emphasis>[-n|-N|-F]</emphasis> &lt;<emphasis>param_path ...</emphasis>&gt;</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314769" xreflabel=""/>Gets the value of a Lustre or LNET parameter from the specified path.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314771" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314773" xreflabel=""/><emphasis role="bold">-n</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314775" xreflabel=""/>Prints only the parameter value and not the parameter name.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314777" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314779" xreflabel=""/><emphasis role="bold">-N</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314781" xreflabel=""/>Prints only matched parameter names and not the values; especially useful when using patterns.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314783" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314785" xreflabel=""/><emphasis role="bold">-F</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314787" xreflabel=""/>When <emphasis role="bold">-N</emphasis> is specified, adds &apos;/&apos;, &apos;@&apos; or &apos;=&apos; for directories, symlinks and writeable files, respectively.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314789" xreflabel=""/><emphasis role="bold">set_param</emphasis><emphasis>[-n]</emphasis><emphasis>&lt;param_path=value...&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314793" xreflabel=""/>Sets the value of a Lustre or LNET parameter from the specified path.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314812" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314814" xreflabel=""/><emphasis role="bold">-n</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314816" xreflabel=""/>Disables printing of the key name when printing values.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314801" xreflabel=""/><emphasis role="bold">conf_param</emphasis><emphasis>[-d] &lt;device|fsname&gt;.&lt;parameter&gt;=&lt;value&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314805" xreflabel=""/>Sets a permanent configuration parameter for any device via the MGS. This command must be run on the MGS node.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1314806" xreflabel=""/>All writeable parameters under <emphasis role="bold">lctl list_param</emphasis> (e.g. <emphasis>lctl list_param -F osc.*.* | grep</emphasis> =) can be permanently set using <emphasis role="bold">lctl conf_param</emphasis>, but the format is slightly different. For <emphasis role="bold">conf_param</emphasis>, the device is specified first, then the obdtype. Wildcards are not supported. Additionally, failover nodes may be added (or removed), and some system-wide parameters may be set as well (sys.at_max, sys.at_min, sys.at_extra, sys.at_early_margin, sys.at_history, sys.timeout, sys.ldlm_timeout). For system-wide parameters, &lt;device&gt; is ignored.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1314807" xreflabel=""/>For more information on setting permanent parameters and <emphasis role="bold">lctl conf_param</emphasis> command examples, see <xref linkend="dbdoclet.50438194_64195"/> (Setting Permanent Parameters).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314848" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314850" xreflabel=""/><emphasis role="bold">-d &lt;device|fsname&gt;.&lt;parameter&gt;</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1314851" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314853" xreflabel=""/>Deletes a parameter setting (use the default value at the next restart). A null value for <emphasis role="bold">&lt;value&gt;</emphasis> also deletes the parameter setting.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314842" xreflabel=""/><emphasis role="bold">activate</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314846" xreflabel=""/>Re-activates an import after the deactivate operation. This setting is only effective until the next restart (see <emphasis role="bold">conf_param</emphasis>).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314836" xreflabel=""/><emphasis role="bold">deactivate</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314840" xreflabel=""/>Deactivates an import, in particular meaning do not assign new file stripes to an OSC. Running lctl deactivate on the MDS stops new objects from being allocated on the OST. Running lctl deactivate on Lustre clients causes them to return -EIO when accessing objects on the OST instead of waiting for recovery.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314830" xreflabel=""/><emphasis role="bold">abort_recovery</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314834" xreflabel=""/>Aborts the recovery process on a re-starting MDT or OST.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
                <note><para>Lustre tunables are not always accessible using the procfs interface, as it is platform-specific. As a solution, lctl {get,set,list}_param has been introduced as a platform-independent interface to the Lustre tunables. Avoid direct references to /proc/{fs,sys}/{lustre,lnet}. For future portability, use lctl {get,set,list}_param instead.</para></note>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1312745" xreflabel=""/><emphasis role="bold">Virtual Block Device Operations</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1302906" xreflabel=""/>Lustre can emulate a virtual block device upon a regular file. This emulation is needed when you are trying to set up a swap space via the file.</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1307850" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1307854" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314859" xreflabel=""/><emphasis role="bold">blockdev_attach</emphasis><emphasis>&lt;file name&gt; &lt;device node&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314863" xreflabel=""/>Attaches a regular Lustre file to a block device. If the device node does not exist, <emphasis role="bold">lctl</emphasis> creates it. We recommend that you create the device node by <emphasis role="bold">lctl</emphasis> since the emulator uses a dynamical major number.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314865" xreflabel=""/><emphasis role="bold">blockdev_detach</emphasis><emphasis>&lt;device node&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314869" xreflabel=""/>Detaches the virtual block device.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314871" xreflabel=""/><emphasis role="bold">blockdev_info</emphasis><emphasis>&lt;device node&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314875" xreflabel=""/>Provides information about the Lustre file attached to the device node.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1312907" xreflabel=""/><emphasis role="bold">Changelogs</emphasis></para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1314964" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1314966" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314995" xreflabel=""/><emphasis role="bold">changelog_register</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1314999" xreflabel=""/>Registers a new changelog user for a particular device. Changelog entries are not purged beyond a registered user's set point (see <emphasis role="bold">lfs changelog_clear</emphasis>).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315001" xreflabel=""/><emphasis role="bold">changelog_deregister</emphasis><emphasis>&lt;id&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315005" xreflabel=""/>Unregisters an existing changelog user. If the user's &quot;clear&quot; record number is the minimum for the device, changelog records are purged until the next minimum.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1312864" xreflabel=""/><emphasis role="bold">Debug</emphasis></para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1307958" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1307962" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315007" xreflabel=""/><emphasis role="bold">debug_daemon</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315011" xreflabel=""/>Starts and stops the debug daemon, and controls the output filename and size.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315013" xreflabel=""/><emphasis role="bold">debug_kernel</emphasis><emphasis>[file] [raw]</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315017" xreflabel=""/>Dumps the kernel debug buffer to stdout or a file.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315019" xreflabel=""/><emphasis role="bold">debug_file</emphasis><emphasis>&lt;input&gt; [output]</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315023" xreflabel=""/>Converts the kernel-dumped debug log from binary to plain text format.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315025" xreflabel=""/><emphasis role="bold">clear</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315029" xreflabel=""/>Clears the kernel debug buffer.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315035" xreflabel=""/><emphasis role="bold">mark</emphasis><emphasis>&lt;text&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315039" xreflabel=""/>Inserts marker text in the kernel debug buffer.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315041" xreflabel=""/><emphasis role="bold">filter</emphasis><emphasis>&lt;subsystem id/debug mask&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315045" xreflabel=""/>Filters kernel debug messages by subsystem or mask.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315047" xreflabel=""/><emphasis role="bold">show</emphasis><emphasis>&lt;subsystem id/debug mask&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315051" xreflabel=""/>Shows specific types of messages.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315053" xreflabel=""/><emphasis role="bold">debug_list</emphasis><emphasis>&lt;subs/types&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315057" xreflabel=""/>Lists all subsystem and debug types.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315059" xreflabel=""/><emphasis role="bold">modules</emphasis><emphasis>&lt;path&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315063" xreflabel=""/>Provides GDB-friendly module information.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1302703" xreflabel=""/>Options</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1303112" xreflabel=""/>Use the following options to invoke lctl.</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1308105" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1308109" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1308144" xreflabel=""/><emphasis role="bold">--device</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1308153" xreflabel=""/>Device to be used for the operation (specified by name or number). See device_list.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1308162" xreflabel=""/><emphasis role="bold">--ignore_errors | ignore_errors</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1308171" xreflabel=""/>Ignores errors during script processing.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1303154" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1315069" xreflabel=""/><emphasis role="bold">lctl</emphasis></para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315070" xreflabel=""/>$ lctl
<anchor xml:id="dbdoclet.50438219_pgfId-1315071" xreflabel=""/>lctl &gt; dl 
<anchor xml:id="dbdoclet.50438219_pgfId-1315072" xreflabel=""/>   0 UP mgc MGC192.168.0.20@tcp btbb24e3-7deb-2ffa-eab0-44dffe00f692 5 
<anchor xml:id="dbdoclet.50438219_pgfId-1315073" xreflabel=""/>   1 UP ost OSS OSS_uuid 3 
<anchor xml:id="dbdoclet.50438219_pgfId-1315074" xreflabel=""/>   2 UP obdfilter testfs-OST0000 testfs-OST0000_UUID 3 
<anchor xml:id="dbdoclet.50438219_pgfId-1315075" xreflabel=""/>lctl &gt; dk /tmp/log Debug log: 87 lines, 87 kept, 0 dropped. 
<anchor xml:id="dbdoclet.50438219_pgfId-1315076" xreflabel=""/>lctl &gt; quit
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1315077" xreflabel=""/>See Also</title>
        <itemizedlist>
            <listitem>
            <para> <xref linkend="dbdoclet.50438219_75432"/> </para>
            </listitem> <listitem>
            <para> <xref linkend="dbdoclet.50438219_12635"/> </para>
            </listitem> <listitem>
            <para> <xref linkend="dbdoclet.50438219_38274"/> </para>
            </listitem> <listitem>
            <para> <xref linkend="dbdoclet.50438206_94597"/> </para>
            </listitem> 
        </itemizedlist>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_58217">
      <title>36.4 ll_decode_filter_fid</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1318305" xreflabel=""/>The ll_decode_filter_fid utility displays the Lustre object ID and MDT parent FID.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318306" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318307" xreflabel=""/>ll_decode_filter_fid object_file [object_file ...]
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318308" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318309" xreflabel=""/>The ll_decode_filter_fid utility decodes and prints the Lustre OST object ID, MDT FID, stripe index for the specified OST object(s), which is stored in the &quot;trusted.fid&quot; attribute on each OST object. This is accessible to ll_decode_filter_fid when the OST filesystem is mounted locally as type ldiskfs for maintenance.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318310" xreflabel=""/>The &quot;trusted.fid&quot; extended attribute is stored on each OST object when it is first modified (data written or attributes set), and is not accessed or modified by Lustre after that time.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318311" xreflabel=""/>The OST object ID (objid) is useful in case of OST directory corruption, though normally the ll_recover_lost_found_objs(8) utility is able to reconstruct the entire OST object directory hierarchy. The MDS FID can be useful to determine which MDS inode an OST object is (or was) used by. The stripe index can be used in conjunction with other OST objects to reconstruct the layout of a file even if the MDT inode was lost.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318312" xreflabel=""/>Examples</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318313" xreflabel=""/>root@oss1# cd /mnt/ost/lost+found
<anchor xml:id="dbdoclet.50438219_pgfId-1318314" xreflabel=""/>root@oss1# ll_decode_filter_fid #12345[4,5,8]
<anchor xml:id="dbdoclet.50438219_pgfId-1318315" xreflabel=""/>#123454: objid=690670 seq=0 parent=[0x751c5:0xfce6e605:0x0]
<anchor xml:id="dbdoclet.50438219_pgfId-1318316" xreflabel=""/>#123455: objid=614725 seq=0 parent=[0x18d11:0xebba84eb:0x1]
<anchor xml:id="dbdoclet.50438219_pgfId-1318317" xreflabel=""/>#123458: objid=533088 seq=0 parent=[0x21417:0x19734d61:0x0]
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318319" xreflabel=""/>This shows that the three files in lost+found have decimal object IDs - 690670, 614725, and 533088, respectively. The object sequence number (formerly object group) is 0 for all current OST objects.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318320" xreflabel=""/>The MDT parent inode FIDs are hexdecimal numbers of the form sequence:oid:idx. Since the sequence number is below 0x100000000 in all these cases, the FIDs are in the legacy Inode and Generation In FID (IGIF) namespace and are mapped directly to the MDT inode = seq and generation = oid values; the MDT inodes are 0x751c5, 0x18d11, and 0x21417 respectively. For objects with MDT parent sequence numbers above 0x200000000, this indicates that the FID needs to be mapped via the MDT Object Index (OI) file on the MDT to determine the internal inode number.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318321" xreflabel=""/>The idx field shows the stripe number of this OST object in the Lustre RAID-0 striped file.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318322" xreflabel=""/>See Also</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318326" xreflabel=""/><xref linkend="dbdoclet.50438219_44971"/></para>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_44971">
      <title>36.5 ll_recover_lost_<anchor xml:id="dbdoclet.50438219_marker-1317865" xreflabel=""/>found_objs</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317867" xreflabel=""/>The ll_recover_lost_found_objs utility helps recover Lustre OST objects (file data) from a lost and found directory and return them to their correct locations.</para>
              <note><para>Running the ll_recover_lost_found_objs tool is not strictly necessary to bring an OST back online, it just avoids losing access to objects that were moved to the lost and found directory due to directory corruption.</para></note>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317869" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317870" xreflabel=""/>$ ll_recover_lost_found_objs [-hv] -d directory
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317871" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317872" xreflabel=""/>The first time Lustre writes to an object, it saves the MDS inode number and the objid as an extended attribute on the object, so in case of directory corruption of the OST, it is possible to recover the objects. Running e2fsck fixes the corrupted OST directory, but it puts all of the objects into a lost and found directory, where they are inaccessible to Lustre. Use the ll_recover_lost_found_objs utility to recover all (or at least most) objects from a lost and found directory and return them to the O/0/d* directories.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317873" xreflabel=""/>To use ll_recover_lost_found_objs, mount the file system locally (using the -t ldiskfs command), run the utility and then unmount it again. The OST must not be mounted by Lustre when ll_recover_lost_found_objs is run.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317892" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317876" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317878" xreflabel=""/> <anchor xml:id="dbdoclet.50438219_pgfId-1317879" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317881" xreflabel=""/><emphasis role="bold">-h</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317883" xreflabel=""/>Prints a help message</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317885" xreflabel=""/><emphasis role="bold">-v</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317887" xreflabel=""/>Increases verbosity</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317889" xreflabel=""/><emphasis role="bold">-d</emphasis><emphasis>directory</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317891" xreflabel=""/>Sets the lost and found directory path</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317893" xreflabel=""/>Example</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317894" xreflabel=""/>ll_recover_lost_found_objs -d /mnt/ost/lost+found 
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_84890">
      <title>36.6 llobdstat</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1316535" xreflabel=""/>The llobdstat utility displays OST statistics.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316536" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316537" xreflabel=""/>llobdstat ost_name [interval]
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316538" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316539" xreflabel=""/>The llobdstat utility displays a line of OST statistics for the given ost_name every interval seconds. It should be run directly on an OSS node. Type <emphasis>CTRL-C</emphasis> to stop statistics printing.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316540" xreflabel=""/>Example</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316541" xreflabel=""/># llobdstat liane-OST0002 1
<anchor xml:id="dbdoclet.50438219_pgfId-1316542" xreflabel=""/>/usr/bin/llobdstat on /proc/fs/lustre/obdfilter/liane-OST0002/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1316543" xreflabel=""/>Processor counters run at 2800.189 MHz
<anchor xml:id="dbdoclet.50438219_pgfId-1316544" xreflabel=""/>Read: 1.21431e+07, Write: 9.93363e+08, create/destroy: 24/1499, stat: 34, p\
unch: 18
<anchor xml:id="dbdoclet.50438219_pgfId-1316545" xreflabel=""/>[NOTE: cx: create, dx: destroy, st: statfs, pu: punch ]
<anchor xml:id="dbdoclet.50438219_pgfId-1316546" xreflabel=""/>Timestamp Read-delta ReadRate Write-delta WriteRate
<anchor xml:id="dbdoclet.50438219_pgfId-1316547" xreflabel=""/>--------------------------------------------------------
<anchor xml:id="dbdoclet.50438219_pgfId-1316548" xreflabel=""/>1217026053 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316549" xreflabel=""/>1217026054 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316550" xreflabel=""/>1217026055 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316551" xreflabel=""/>1217026056 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316552" xreflabel=""/>1217026057 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316553" xreflabel=""/>1217026058 0.00MB 0.00MB/s 0.00MB 0.00MB/s
<anchor xml:id="dbdoclet.50438219_pgfId-1316554" xreflabel=""/>1217026059 0.00MB 0.00MB/s 0.00MB 0.00MB/s st:1
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316555" xreflabel=""/>Files</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316556" xreflabel=""/>/proc/fs/lustre/obdfilter/&lt;ostname&gt;/stats
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_90386">
      <title>36.7 llog_reader</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1318200" xreflabel=""/>The llog_reader utility parses Lustre's on-disk configuration logs.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318201" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318202" xreflabel=""/>llog_reader filename
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318203" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318204" xreflabel=""/>The llog_reader utility parses the binary format of Lustre&apos;s on-disk configuration logs. Llog_reader can only read logs; use tunefs.lustre to write to them.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318205" xreflabel=""/>To examine a log file on a stopped Lustre server, mount its backing file system as ldiskfs, then use llog_reader to dump the log file&apos;s contents, for example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318206" xreflabel=""/>mount -t ldiskfs /dev/sda /mnt/mgs 
<anchor xml:id="dbdoclet.50438219_pgfId-1318207" xreflabel=""/>llog_reader /mnt/mgs/CONFIGS/tfs-client
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318208" xreflabel=""/>To examine the same log file on a running Lustre server, use the ldiskfs-enabled debugfs utility (called debug.ldiskfs on some distributions) to extract the file, for example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318209" xreflabel=""/>debugfs -c -R &apos;dump CONFIGS/tfs-client /tmp/tfs-client&apos; /dev/sda 
<anchor xml:id="dbdoclet.50438219_pgfId-1318210" xreflabel=""/>llog_reader /tmp/tfs-client
</screen>
        <informaltable frame="none">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="5*"/>
            <colspec colname="c2" colwidth="95*"/>
            
            
            <tbody>
              <row>
                <entry><para><inlinemediaobject><imageobject role="html">
                        <imagedata fileref="./shared/caution.gif" scalefit="1"/>
                      </imageobject>
<imageobject role="fo">
                        <imagedata contentdepth="100%" contentwidth="" depth="" fileref="./shared/caution.gif" scalefit="1" width="100%"/>
                      </imageobject>
</inlinemediaobject></para></entry>
                <entry><para><emphasis role="bold">Caution -</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1318211" xreflabel=""/>Although they are stored in the CONFIGS directory, mountdata files do not use the configuration log format and will confuse the llog_reader utility.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318212" xreflabel=""/>See Also</title>
        <para><xref linkend="dbdoclet.50438219_39574"/></para>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_23232">
      <title>36.8 ll<anchor xml:id="dbdoclet.50438219_marker-1318052" xreflabel=""/>stat</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1318054" xreflabel=""/>The llstat utility displays Lustre statistics.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318055" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318056" xreflabel=""/>llstat [-c] [-g] [-i interval] stats_file
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318057" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318058" xreflabel=""/>The llstat utility displays statistics from any of the Lustre statistics files that share a common format and are updated at <emphasis>interval</emphasis> seconds. To stop statistics printing, use <emphasis>ctrl</emphasis>-<emphasis>c.</emphasis></para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318085" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318061" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318063" xreflabel=""/> <anchor xml:id="dbdoclet.50438219_pgfId-1318064" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318066" xreflabel=""/><emphasis role="bold">-c</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318068" xreflabel=""/>Clears the statistics file.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318070" xreflabel=""/><emphasis role="bold">-i</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318072" xreflabel=""/>Specifies the polling period (in seconds).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318074" xreflabel=""/><emphasis role="bold">-g</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318076" xreflabel=""/>Specifies graphable output format.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318078" xreflabel=""/><emphasis role="bold">-h</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318080" xreflabel=""/>Displays help information.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318082" xreflabel=""/><emphasis role="bold">stats_file</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318084" xreflabel=""/>Specifies either the full path to a statistics file or the shorthand reference, <emphasis role="bold">mds</emphasis> or <emphasis role="bold">ost</emphasis></para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318086" xreflabel=""/>Example</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318087" xreflabel=""/>To monitor /proc/fs/lustre/ost/OSS/ost/stats at 1 second intervals, run;</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318088" xreflabel=""/>llstat -i 1 ost
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318089" xreflabel=""/>Files</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318090" xreflabel=""/>The llstat files are located at:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318091" xreflabel=""/>/proc/fs/lustre/mdt/MDS/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318092" xreflabel=""/>/proc/fs/lustre/mds/*/exports/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318093" xreflabel=""/>/proc/fs/lustre/mdc/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318094" xreflabel=""/>/proc/fs/lustre/ldlm/services/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318095" xreflabel=""/>/proc/fs/lustre/ldlm/namespaces/*/pool/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318096" xreflabel=""/>/proc/fs/lustre/mgs/MGS/exports/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318097" xreflabel=""/>/proc/fs/lustre/ost/OSS/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318098" xreflabel=""/>/proc/fs/lustre/osc/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318099" xreflabel=""/>/proc/fs/lustre/obdfilter/*/exports/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318100" xreflabel=""/>/proc/fs/lustre/obdfilter/*/stats
<anchor xml:id="dbdoclet.50438219_pgfId-1318101" xreflabel=""/>/proc/fs/lustre/llite/*/stats
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_23648">
      <title>36.9 llverdev<anchor xml:id="dbdoclet.50438219_marker-1317750" xreflabel=""/></title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317752" xreflabel=""/>The llverdev verifies a block device is functioning properly over its full size.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317753" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317754" xreflabel=""/>llverdev [-c <emphasis>chunksize</emphasis>] [-f] [-h] [-o <emphasis>offset</emphasis>] [-l] [-p] [-r] [-t <emphasis>timestamp</emphasis>] [-v] [-w] <emphasis>device</emphasis></screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317755" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317756" xreflabel=""/>Sometimes kernel drivers or hardware devices have bugs that prevent them from accessing the full device size correctly, or possibly have bad sectors on disk or other problems which prevent proper data storage. There are often defects associated with major system boundaries such as 2^32 bytes, 2^31 sectors, 2^31 blocks, 2^32 blocks, etc.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317757" xreflabel=""/>The llverdev utility writes and verifies a unique test pattern across the entire device to ensure that data is accessible after it was written, and that data written to one part of the disk is not overwriting data on another part of the disk.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317758" xreflabel=""/>It is expected that llverdev will be run on large size devices (TB). It is always better to run llverdev in verbose mode, so that device testing can be easily restarted from the point where it was stopped.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317759" xreflabel=""/>Running a full verification can be time-consuming for very large devices. We recommend starting with a partial verification to ensure that the device is minimally sane before investing in a full verification.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317827" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="3">
            <colspec colname="c1" colwidth="33*"/>
            <colspec colname="c2" colwidth="33*"/>
            <colspec colname="c3" colwidth="33*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317762" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317764" xreflabel=""/> </emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317766" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317768" xreflabel=""/><emphasis role="bold">-c|--chunksize</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317772" xreflabel=""/>I/O chunk size in bytes (default value is 1048576).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317774" xreflabel=""/><emphasis role="bold">-f|--force</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317778" xreflabel=""/>Forces the test to run without a confirmation that the device will be overwritten and all data will be permanently destroyed.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317780" xreflabel=""/><emphasis role="bold">-h|--help</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317784" xreflabel=""/>Displays a brief help message.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317786" xreflabel=""/><emphasis role="bold">-o</emphasis><emphasis>offset</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317790" xreflabel=""/>Offset (in kilobytes) of the start of the test (default value is 0).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317792" xreflabel=""/><emphasis role="bold">-l|--long</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317796" xreflabel=""/>Runs a full check, writing and then reading and verifying every block on the disk.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317798" xreflabel=""/><emphasis role="bold">-p|--partial</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317802" xreflabel=""/>Runs a partial check, only doing periodic checks across the device (1 GB steps).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317804" xreflabel=""/><emphasis role="bold">-r|--read</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317808" xreflabel=""/>Runs the test in read (verify) mode only, after having previously run the test in <emphasis role="bold">-w</emphasis> mode.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317810" xreflabel=""/><emphasis role="bold">-t</emphasis><emphasis>timestamp</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317814" xreflabel=""/>Sets the test start time as printed at the start of a previously-interrupted test to ensure that validation data is the same across the entire filesystem (default value is the current time()).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317816" xreflabel=""/><emphasis role="bold">-v|--verbose</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317820" xreflabel=""/>Runs the test in verbose mode, listing each read and write operation.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317822" xreflabel=""/><emphasis role="bold">-w|--write</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317826" xreflabel=""/>Runs the test in write (test-pattern) mode (default runs both read and write).</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317828" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317829" xreflabel=""/>Runs a partial device verification on /dev/sda:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317830" xreflabel=""/>llverdev -v -p /dev/sda 
<anchor xml:id="dbdoclet.50438219_pgfId-1317831" xreflabel=""/>llverdev: permanently overwrite all data on /dev/sda (yes/no)? y 
<anchor xml:id="dbdoclet.50438219_pgfId-1317832" xreflabel=""/>llverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in size 
<anchor xml:id="dbdoclet.50438219_pgfId-1317833" xreflabel=""/>Timestamp: 1009839028 
<anchor xml:id="dbdoclet.50438219_pgfId-1317834" xreflabel=""/>Current write offset: 4096 kB
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317835" xreflabel=""/>Continues an interrupted verification at offset 4096kB from the start of the device, using the same timestamp as the previous run:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317836" xreflabel=""/>llverdev -f -v -p --offset=4096 --timestamp=1009839028 /dev/sda 
<anchor xml:id="dbdoclet.50438219_pgfId-1317837" xreflabel=""/>llverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in size 
<anchor xml:id="dbdoclet.50438219_pgfId-1317838" xreflabel=""/>Timestamp: 1009839028 
<anchor xml:id="dbdoclet.50438219_pgfId-1317839" xreflabel=""/>write complete 
<anchor xml:id="dbdoclet.50438219_pgfId-1317840" xreflabel=""/>read complete 
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_64286">
      <title>36.10 lshowmount<anchor xml:id="dbdoclet.50438219_marker-1317690" xreflabel=""/></title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317692" xreflabel=""/>The lshowmount utility shows Lustre exports.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317693" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317694" xreflabel=""/>lshowmount [-ehlv]
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317695" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317696" xreflabel=""/>The lshowmount utility shows the hosts that have Lustre mounted to a server. Ths utility looks for exports from the MGS, MDS, and obdfilter.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317728" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
          <row>
            <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317699" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317703" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317705" xreflabel=""/><emphasis role="bold">-e|--enumerate</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317709" xreflabel=""/>Causes lshowmount to list each client mounted on a separate line instead of trying to compress the list of clients into a hostrange string.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317711" xreflabel=""/><emphasis role="bold">-h|--help</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317715" xreflabel=""/>Causes lshowmount to print out a usage message.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317717" xreflabel=""/><emphasis role="bold">-l|--lookup</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317721" xreflabel=""/>Causes lshowmount to try to look up the hostname for NIDs that look like IP addresses.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317723" xreflabel=""/><emphasis role="bold">-v|--verbose</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317727" xreflabel=""/>Causes lshowmount to output export information for each service instead of only displaying the aggregate information for all Lustre services on the server.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317729" xreflabel=""/>Files</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317730" xreflabel=""/>/proc/fs/lustre/mgs/&lt;server&gt;/exports/&lt;uuid&gt;/nid /proc/fs/lustre/mds/&lt;server&gt;/expo\
rts/&lt;uuid&gt;/nid /proc/fs/lustre/obdfilter/&lt;server&gt;/exports/&lt;uuid&gt;/nid
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_90218">
      <title>36.11 l<anchor xml:id="dbdoclet.50438219_marker-1318121" xreflabel=""/><anchor xml:id="dbdoclet.50438219_marker-1318122" xreflabel=""/>st</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1318124" xreflabel=""/>The lst utility starts LNET self-test.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318125" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318126" xreflabel=""/>lst
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318127" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318128" xreflabel=""/>LNET self-test helps site administrators confirm that Lustre Networking (LNET) has been properly installed and configured. The self-test also confirms that LNET and the network software and hardware underlying it are performing as expected.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318129" xreflabel=""/>Each LNET self-test runs in the context of a session. A node can be associated with only one session at a time, to ensure that the session has exclusive use of the nodes on which it is running. A session is create, controlled and monitored from a single node; this is referred to as the self-test console.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318130" xreflabel=""/>Any node may act as the self-test console. Nodes are named and allocated to a self-test session in groups. This allows all nodes in a group to be referenced by a single name.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318131" xreflabel=""/>Test configurations are built by describing and running test batches. A test batch is a named collection of tests, with each test composed of a number of individual point-to-point tests running in parallel. These individual point-to-point tests are instantiated according to the test type, source group, target group and distribution specified when the test is added to the test batch.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318132" xreflabel=""/>Modules</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318133" xreflabel=""/>To run LNET self-test, load these modules: libcfs, lnet, lnet_selftest and any one of the klnds (ksocklnd, ko2iblnd...). To load all necessary modules, run modprobe lnet_selftest, which recursively loads the modules on which lnet_selftest depends.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318134" xreflabel=""/>There are two types of nodes for LNET self-test: the console node and test nodes. Both node types require all previously-specified modules to be loaded. (The userspace test node does not require these modules).</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318135" xreflabel=""/>Test nodes can be in either kernel or in userspace. A console user can invite a kernel test node to join the test session by running lst add_group NID, but the user cannot actively add a userspace test node to the test session. However, the console user can passively accept a test node to the test session while the test node runs lst client to connect to the console.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318136" xreflabel=""/>Utilities</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318137" xreflabel=""/>LNET self-test includes two user utilities, lst and lstclient.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318138" xreflabel=""/>lst is the user interface for the self-test console (run on the console node). It provides a list of commands to control the entire test system, such as create session, create test groups, etc.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318139" xreflabel=""/>lstclient is the userspace self-test program which is linked with userspace LNDs and LNET. A user can invoke lstclient to join a self-test session:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318140" xreflabel=""/>lstclient -sesid CONSOLE_NID group NAME
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318141" xreflabel=""/>Example Script</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1318142" xreflabel=""/>This is a sample LNET self-test script which simulates the traffic pattern of a set of Lustre servers on a TCP network, accessed by Lustre clients on an IB network (connected via LNET routers), with half the clients reading and half the clients writing.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318143" xreflabel=""/>#!/bin/bash
<anchor xml:id="dbdoclet.50438219_pgfId-1318144" xreflabel=""/>export LST_SESSION=$$
<anchor xml:id="dbdoclet.50438219_pgfId-1318145" xreflabel=""/>lst new_session read/write
<anchor xml:id="dbdoclet.50438219_pgfId-1318146" xreflabel=""/>lst add_group servers 192.168.10.[8,10,12-16]@tcp
<anchor xml:id="dbdoclet.50438219_pgfId-1318147" xreflabel=""/>lst add_group readers 192.168.1.[1-253/2]@o2ib
<anchor xml:id="dbdoclet.50438219_pgfId-1318148" xreflabel=""/>lst add_group writers 192.168.1.[2-254/2]@o2ib
<anchor xml:id="dbdoclet.50438219_pgfId-1318149" xreflabel=""/>lst add_batch bulk_rw
<anchor xml:id="dbdoclet.50438219_pgfId-1318150" xreflabel=""/>lst add_test --batch bulk_rw --from readers --to servers     brw read check\
=simple size=1M
<anchor xml:id="dbdoclet.50438219_pgfId-1318151" xreflabel=""/>lst add_test --batch bulk_rw --from writers --to servers     brw write chec\
k=full size=4K
<anchor xml:id="dbdoclet.50438219_pgfId-1318152" xreflabel=""/># start running
<anchor xml:id="dbdoclet.50438219_pgfId-1318153" xreflabel=""/>lst run bulk_rw
<anchor xml:id="dbdoclet.50438219_pgfId-1318154" xreflabel=""/># display server stats for 30 seconds
<anchor xml:id="dbdoclet.50438219_pgfId-1318155" xreflabel=""/>lst stat servers &amp; sleep 30; kill $!
<anchor xml:id="dbdoclet.50438219_pgfId-1318156" xreflabel=""/># tear down
<anchor xml:id="dbdoclet.50438219_pgfId-1318157" xreflabel=""/>lst end_session 
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_54734">
      <title>36.12 lustre_<anchor xml:id="dbdoclet.50438219_marker-1317379" xreflabel=""/>rmmod.sh</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317381" xreflabel=""/>The lustre_rmmod.sh utility removes all Lustre and LNET modules (assuming no Lustre services are running). It is located in /usr/bin.</para>
              <note><para>The lustre_rmmod.sh utility does not work if Lustre modules are being used or if you have manually run the lctl network up command.</para></note>
    </section>
    <section xml:id="dbdoclet.50438219_63667">
      <title>36.13 lustre_<anchor xml:id="dbdoclet.50438219_marker-1317224" xreflabel=""/>rsync</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317226" xreflabel=""/>The lustre_rsync utility synchronizes (replicates) a Lustre file system to a target file system.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317227" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317228" xreflabel=""/>lustre_rsync --source|-s &lt;src&gt; --target|-t &lt;tgt&gt; 
<anchor xml:id="dbdoclet.50438219_pgfId-1317229" xreflabel=""/>   --mdt|-m &lt;mdt&gt; [--user|-u &lt;user id&gt;]
<anchor xml:id="dbdoclet.50438219_pgfId-1317230" xreflabel=""/>   [--xattr|-x &lt;yes|no&gt;] [--verbose|-v]
<anchor xml:id="dbdoclet.50438219_pgfId-1317231" xreflabel=""/>   [--statuslog|-l &lt;log&gt;] [--dry-run] [--abort-on-err] 
<anchor xml:id="dbdoclet.50438219_pgfId-1317232" xreflabel=""/> 
<anchor xml:id="dbdoclet.50438219_pgfId-1317233" xreflabel=""/>lustre_rsync --statuslog|-l &lt;log&gt;
<anchor xml:id="dbdoclet.50438219_pgfId-1317234" xreflabel=""/> 
<anchor xml:id="dbdoclet.50438219_pgfId-1317235" xreflabel=""/>lustre_rsync --statuslog|-l &lt;log&gt; --source|-s &lt;source&gt;
<anchor xml:id="dbdoclet.50438219_pgfId-1317236" xreflabel=""/>   --target|-t &lt;tgt&gt; --mdt|-m &lt;mdt&gt;
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317237" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317238" xreflabel=""/>The lustre_rsync utility is designed to synchronize (replicate) a Lustre file system (source) to another file system (target). The target can be a Lustre file system or any other type, and is a normal, usable file system. The synchronization operation is efficient and does not require directory walking, as lustre_rsync uses Lustre MDT changelogs to identify changes in the Lustre file system.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317239" xreflabel=""/>Before using lustre_rsync:</para>
        <itemizedlist><listitem>
            <para><anchor xml:id="dbdoclet.50438219_pgfId-1317240" xreflabel=""/> A changelog user must be registered (see lctl (8) changelog_register)</para>
          </listitem>

</itemizedlist>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317241" xreflabel=""/>- AND -</para>
        <itemizedlist><listitem>
            <para><anchor xml:id="dbdoclet.50438219_pgfId-1317242" xreflabel=""/> Verify that the Lustre file system (source) and the replica file system (target) are identical before the changelog user is registered. If the file systems are discrepant, use a utility, e.g. regular rsync (not lustre_rsync) to make them identical.</para>
          </listitem>

</itemizedlist>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317305" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317245" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317249" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317251" xreflabel=""/><emphasis role="bold">--source=</emphasis><emphasis>&lt;src&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317255" xreflabel=""/>The path to the root of the Lustre file system (source) which will be synchronized. This is a mandatory option if a valid status log created during a previous synchronization operation (--statuslog) is not specified.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317257" xreflabel=""/><emphasis role="bold">--target=</emphasis><emphasis>&lt;tgt&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317261" xreflabel=""/>The path to the root where the source file system will be synchronized (target). This is a mandatory option if the status log created during a previous synchronization operation (--statuslog) is not specified. This option can be repeated if multiple synchronization targets are desired.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317263" xreflabel=""/><emphasis role="bold">--mdt=</emphasis><emphasis>&lt;mdt&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317267" xreflabel=""/>The metadata device to be synchronized. A changelog user must be registered for this device. This is a mandatory option if a valid status log created during a previous synchronization operation (--statuslog) is not specified.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317269" xreflabel=""/><emphasis role="bold">--user=</emphasis><emphasis>&lt;user id&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317273" xreflabel=""/>The changelog user ID for the specified MDT. To use lustre_rsync, the changelog user must be registered. For details, see the changelog_register parameter in the lctl man page. This is a mandatory option if a valid status log created during a previous synchronization operation (--statuslog) is not specified.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317275" xreflabel=""/><emphasis role="bold">--statuslog=</emphasis><emphasis>&lt;log&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317279" xreflabel=""/>A log file to which synchronization status is saved. When lustre_rsync starts, the state of a previous replication is read from here. If the status log from a previous synchronization operation is specified, otherwise mandatory options like --source, --target and --mdt options may be skipped. By specifying options like --source, --target and/or --mdt in addition to the --statuslog option, parameters in the status log can be overriden. Command line options take precedence over options in the status log.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317281" xreflabel=""/><emphasis role="bold">--xattr</emphasis><emphasis>&lt;yes|no&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317285" xreflabel=""/>Specifies whether extended attributes (xattrs) are synchronized or not. The default is to synchronize extended attributes.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317286" xreflabel=""/>NOTE: Disabling xattrs causes Lustre striping information not to be synchronized.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317288" xreflabel=""/><emphasis role="bold">--verbose</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317292" xreflabel=""/>Produces a verbose output.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317294" xreflabel=""/><emphasis role="bold">--dry-run</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317298" xreflabel=""/>Shows the output of lustre_rsync commands (copy, mkdir, etc.) on the target file system without actually executing them.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317300" xreflabel=""/><emphasis role="bold">--abort-on-err</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317304" xreflabel=""/>Shows the output of lustre_rsync commands (copy, mkdir, etc.) on the target file system without actually executing them.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317306" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317307" xreflabel=""/>Register a changelog user for an MDT (e.g., MDT lustre-MDT0000).</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317308" xreflabel=""/>$ ssh 
<anchor xml:id="dbdoclet.50438219_pgfId-1317309" xreflabel=""/>$ MDS lctl changelog_register \
<anchor xml:id="dbdoclet.50438219_pgfId-1317310" xreflabel=""/>           --device lustre-MDT0000 -n 
<anchor xml:id="dbdoclet.50438219_pgfId-1317311" xreflabel=""/>cl1
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317312" xreflabel=""/> </para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317313" xreflabel=""/>Synchronize/replicate a Lustre file system (/mnt/lustre) to a target file system (/mnt/target).</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317314" xreflabel=""/>$ lustre_rsync --source=/mnt/lustre --target=/mnt/target \ 
<anchor xml:id="dbdoclet.50438219_pgfId-1317315" xreflabel=""/>           --mdt=lustre-MDT0000 --user=cl1 \ 
<anchor xml:id="dbdoclet.50438219_pgfId-1317316" xreflabel=""/>           --statuslog replicate.log  --verbose 
<anchor xml:id="dbdoclet.50438219_pgfId-1317317" xreflabel=""/>Lustre filesystem: lustre 
<anchor xml:id="dbdoclet.50438219_pgfId-1317318" xreflabel=""/>MDT device: lustre-MDT0000 
<anchor xml:id="dbdoclet.50438219_pgfId-1317319" xreflabel=""/>Source: /mnt/lustre 
<anchor xml:id="dbdoclet.50438219_pgfId-1317320" xreflabel=""/>Target: /mnt/target 
<anchor xml:id="dbdoclet.50438219_pgfId-1317321" xreflabel=""/>Statuslog: sync.log 
<anchor xml:id="dbdoclet.50438219_pgfId-1317322" xreflabel=""/>Changelog registration: cl1 
<anchor xml:id="dbdoclet.50438219_pgfId-1317323" xreflabel=""/>Starting changelog record: 0 
<anchor xml:id="dbdoclet.50438219_pgfId-1317324" xreflabel=""/>Errors: 0 
<anchor xml:id="dbdoclet.50438219_pgfId-1317325" xreflabel=""/>lustre_rsync took 1 seconds 
<anchor xml:id="dbdoclet.50438219_pgfId-1317326" xreflabel=""/>Changelog records consumed: 22
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317327" xreflabel=""/> </para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317328" xreflabel=""/>After the file system undergoes changes, synchronize the changes with the target file system. Only the statuslog name needs to be specified, as it has all the parameters passed earlier.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317329" xreflabel=""/>$ lustre_rsync --statuslog replicate.log --verbose 
<anchor xml:id="dbdoclet.50438219_pgfId-1317330" xreflabel=""/>Replicating Lustre filesystem: lustre 
<anchor xml:id="dbdoclet.50438219_pgfId-1317331" xreflabel=""/>MDT device: lustre-MDT0000 
<anchor xml:id="dbdoclet.50438219_pgfId-1317332" xreflabel=""/>Source: /mnt/lustre 
<anchor xml:id="dbdoclet.50438219_pgfId-1317333" xreflabel=""/>Target: /mnt/target 
<anchor xml:id="dbdoclet.50438219_pgfId-1317334" xreflabel=""/>Statuslog: replicate.log 
<anchor xml:id="dbdoclet.50438219_pgfId-1317335" xreflabel=""/>Changelog registration: cl1 
<anchor xml:id="dbdoclet.50438219_pgfId-1317336" xreflabel=""/>Starting changelog record: 22 
<anchor xml:id="dbdoclet.50438219_pgfId-1317337" xreflabel=""/>Errors: 0 
<anchor xml:id="dbdoclet.50438219_pgfId-1317338" xreflabel=""/>lustre_rsync took 2 seconds 
<anchor xml:id="dbdoclet.50438219_pgfId-1317339" xreflabel=""/>Changelog records consumed: 42
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317340" xreflabel=""/> </para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317341" xreflabel=""/>Synchronize a Lustre file system (/mnt/lustre) to two target file systems (/mnt/target1 and /mnt/target2).</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317342" xreflabel=""/>$ lustre_rsync --source=/mnt/lustre \ 
<anchor xml:id="dbdoclet.50438219_pgfId-1317343" xreflabel=""/>   --target=/mnt/target1 --target=/mnt/target2 \ 
<anchor xml:id="dbdoclet.50438219_pgfId-1317344" xreflabel=""/>   --mdt=lustre-MDT0000 --user=cl1 
<anchor xml:id="dbdoclet.50438219_pgfId-1317345" xreflabel=""/>   --statuslog replicate.log
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317346" xreflabel=""/>See Also</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317353" xreflabel=""/><xref linkend="dbdoclet.50438206_94597"/></para>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_75432">
      <title>36.14 mkfs.<anchor xml:id="dbdoclet.50438219_marker-1316695" xreflabel=""/>lustre</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1316697" xreflabel=""/>The mkfs.lustre utility formats a disk for a Lustre service.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316927" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316698" xreflabel=""/>mkfs.lustre &lt;target_type&gt; [options] device
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316734" xreflabel=""/>where &lt;target_type&gt; is one of the following:</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1316715" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1316717" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316719" xreflabel=""/><emphasis role="bold">--ost</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316721" xreflabel=""/>Object Storage Target (OST)</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316723" xreflabel=""/><emphasis role="bold">--mdt</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316725" xreflabel=""/>Metadata Storage Target (MDT)</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316727" xreflabel=""/><emphasis role="bold">--network=</emphasis><emphasis>net,...</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316729" xreflabel=""/>Network(s) to which to restrict this OST/MDT. This option can be repeated as necessary.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316731" xreflabel=""/><emphasis role="bold">--mgs</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316733" xreflabel=""/>Configuration Management Service (MGS), one per site. This service can be combined with one <emphasis role="bold">--mdt</emphasis> service by specifying both types.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316744" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316745" xreflabel=""/>mkfs.lustre is used to format a disk device for use as part of a Lustre file system. After formatting, a disk can be mounted to start the Lustre service defined by this command.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316746" xreflabel=""/>When the file system is created, parameters can simply be added as a --param option to the mkfs.lustre command. See <xref linkend="dbdoclet.50438194_17237"/>.</para>
        <informaltable frame="all">
          <tgroup cols="3">
            <colspec colname="c1" colwidth="33*"/>
            <colspec colname="c2" colwidth="33*"/>
            <colspec colname="c3" colwidth="33*"/>
            <thead>
              <row>
                <entry nameend="c2" namest="c1"><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1316749" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1316753" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316755" xreflabel=""/><emphasis role="bold">--backfstype</emphasis>=<emphasis>fstype</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316759" xreflabel=""/>Forces a particular format for the backing file system (such as ext3, ldiskfs).</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316761" xreflabel=""/><emphasis role="bold">--comment</emphasis>=<emphasis>comment</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316765" xreflabel=""/>Sets a user comment about this disk, ignored by Lustre.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316767" xreflabel=""/><emphasis role="bold">--device-size</emphasis>=<emphasis>KB</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316771" xreflabel=""/>Sets the device size for loop devices.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316773" xreflabel=""/><emphasis role="bold">--dryrun</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316777" xreflabel=""/>Only prints what would be done; it does not affect the disk.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316779" xreflabel=""/><emphasis role="bold">--failnode</emphasis>=<emphasis>nid</emphasis>,...</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316783" xreflabel=""/>Sets the NID(s) of a failover partner. This option can be repeated as needed.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316785" xreflabel=""/><emphasis role="bold">--fsname</emphasis>=<emphasis>filesystem_name</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316789" xreflabel=""/>The Lustre file system of which this service/node will be a part. The default file system name is 'lustreâ€.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316790" xreflabel=""/> </para><note><para>The file system name is limited to 8 characters.</para></note></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316793" xreflabel=""/><emphasis role="bold">--index</emphasis>=<emphasis>index</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316797" xreflabel=""/> Forces a particular OST or MDT index.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316799" xreflabel=""/><emphasis role="bold">--mkfsoptions</emphasis>=<emphasis>opts</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316803" xreflabel=""/> Formats options for the backing file system. For example, ext3 options could be set here.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316805" xreflabel=""/><emphasis role="bold">--mountfsoptions</emphasis>=<emphasis>opts</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316809" xreflabel=""/> Sets the mount options used when the backing file system is mounted.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316810" xreflabel=""/><emphasis role="bold">CAUTION</emphasis>: Unlike earlier versions of mkfs.lustre, this version completely replaces the default mount options with those specified on the command line, and issues a warning on stderr if any default mount options are omitted.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316811" xreflabel=""/>The defaults for ldiskfs are:</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316812" xreflabel=""/>OST: <emphasis>errors=remount-ro,mballoc,extents</emphasis>;</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316813" xreflabel=""/>MGS/MDT: <emphasis>errors=remount-ro,iopen_nopriv,user_xattr</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316814" xreflabel=""/>Do not alter the default mount options unless you know what you are doing.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316816" xreflabel=""/><emphasis role="bold">--network</emphasis>=<emphasis>net</emphasis>,...</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1316817" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316821" xreflabel=""/> Network(s) to which to restrict this OST/MDT. This option can be repeated as necessary.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316823" xreflabel=""/><emphasis role="bold">--mgsnode</emphasis>=<emphasis>nid</emphasis>,...</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316827" xreflabel=""/>Sets the NIDs of the MGS node, required for all targets other than the MGS.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316829" xreflabel=""/><emphasis role="bold">--param</emphasis><emphasis>key</emphasis>=<emphasis>value</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316833" xreflabel=""/>Sets the permanent parameter <emphasis>key</emphasis> to value <emphasis>value</emphasis>. This option can be repeated as necessary. Typical options might include:</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316835" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316837" xreflabel=""/>--<emphasis>param sys.timeout=40</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316839" xreflabel=""/>System obd timeout.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316841" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316843" xreflabel=""/>--<emphasis>param lov.stripesize=2M</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316845" xreflabel=""/>Default stripe size.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316847" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316849" xreflabel=""/>--<emphasis>param lov.stripecount=2</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316851" xreflabel=""/>Default stripe count.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316853" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316855" xreflabel=""/>--<emphasis>param failover.mode=failout</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316857" xreflabel=""/>Returns errors instead of waiting for recovery.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316859" xreflabel=""/><emphasis role="bold">--quiet</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316863" xreflabel=""/>Prints less information.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316865" xreflabel=""/><emphasis role="bold">--reformat</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316869" xreflabel=""/>Reformats an existing Lustre disk.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316871" xreflabel=""/><emphasis role="bold">--stripe-count-hint=stripes</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316875" xreflabel=""/>Used to optimize the MDT's inode size.</para></entry>
              </row>
              <row>
                <entry nameend="c2" namest="c1"><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316877" xreflabel=""/><emphasis role="bold">--verbose</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1316881" xreflabel=""/>Prints more information.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316890" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316891" xreflabel=""/>Creates a combined MGS and MDT for file system <emphasis role="bold">testfs</emphasis> on, e.g., node <emphasis role="bold">cfs21</emphasis>:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316892" xreflabel=""/>mkfs.lustre --fsname=testfs --mdt --mgs /dev/sda1
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316893" xreflabel=""/>Creates an OST for file system <emphasis role="bold">testfs</emphasis> on any node (using the above MGS):</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316894" xreflabel=""/>mkfs.lustre --fsname=testfs --ost --mgsnode=cfs21@tcp0 /dev/sdb
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316895" xreflabel=""/>Creates a standalone MGS on, e.g., node <emphasis role="bold">cfs22</emphasis>:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316896" xreflabel=""/>mkfs.lustre --mgs /dev/sda1
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1316897" xreflabel=""/>Creates an MDT for file system <emphasis role="bold">myfs1</emphasis> on any node (using the above MGS):</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1316898" xreflabel=""/>mkfs.lustre --fsname=myfs1 --mdt --mgsnode=cfs22@tcp0 /dev/sda2
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1316899" xreflabel=""/>See Also</title>
        <itemizedlist>
            <listitem>
            <para><xref linkend="dbdoclet.50438219_75432"/>mkfs.lustre, </para>
            </listitem> <listitem>
            <para><xref linkend="dbdoclet.50438219_12635"/>mount.lustre, </para>
            </listitem> <listitem>
            <para><xref linkend="dbdoclet.50438206_94597"/>lfs</para>
            </listitem>
    </itemizedlist>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_12635">
      <title>36.15 mount.<anchor xml:id="dbdoclet.50438219_marker-1310637" xreflabel=""/>lustre</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1310639" xreflabel=""/>The mount.lustre utility starts a Lustre client or target service.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1310640" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294724" xreflabel=""/>mount -t lustre [-o options] directory
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1294725" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1315116" xreflabel=""/>The mount.lustre utility starts a Lustre client or target service. This program should not be called directly; rather, it is a helper program invoked through mount(8), as shown above. Use the umount command to stop Lustre clients and targets.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294727" xreflabel=""/>There are two forms for the device option, depending on whether a client or a target service is started:</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1308672" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1308676" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315124" xreflabel=""/><emphasis>&lt;mgsspec&gt;:/&lt;fsname&gt;</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1315125" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315129" xreflabel=""/>Mounts the Lustre file system named <emphasis>fsname</emphasis> on the client by contacting the Management Service at <emphasis>mgsspec</emphasis> on the pathname given by <emphasis>directory</emphasis>. The format for <emphasis>mgsspec</emphasis> is defined below. A mounted client file system appears in fstab(5) and is usable, like any local file system, and provides a full POSIX-compliant interface.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315131" xreflabel=""/><emphasis>&lt;disk_device&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315135" xreflabel=""/>Starts the target service defined by the mkfs.lustre command on the physical disk <emphasis>disk_device</emphasis>. A mounted target service file system is only useful for df(1) operations and appears in fstab(5) to show the device is in use.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1301179" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1309271" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1309273" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315144" xreflabel=""/><emphasis role="bold">&lt;mgsspec&gt;:</emphasis>=<emphasis>&lt;mgsnode&gt;[:&lt;mgsnode&gt;]</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1315145" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315147" xreflabel=""/>The MGS specification may be a colon-separated list of nodes.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315149" xreflabel=""/><emphasis role="bold">&lt;mgsnode&gt;:</emphasis>=<emphasis>&lt;mgsnid&gt;[,&lt;mgsnid&gt;]</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315151" xreflabel=""/>Each node may be specified by a comma-separated list of NIDs.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1308731" xreflabel=""/>In addition to the standard mount options, Lustre understands the following client-specific options:</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1309286" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1309288" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315157" xreflabel=""/><emphasis role="bold">flock</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315159" xreflabel=""/>Enables full flock support, coherent across all client nodes.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315161" xreflabel=""/><emphasis role="bold">localflock</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315163" xreflabel=""/>Enables local flock support, using only client-local flock (faster, for applications that require flock, but do not run on multiple nodes).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315165" xreflabel=""/><emphasis role="bold">noflock</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315167" xreflabel=""/>Disables flock support entirely. Applications calling flock get an error. It is up to the administrator to choose either <emphasis role="bold">localflock</emphasis> (fastest, low impact, not coherent between nodes) or <emphasis role="bold">flock</emphasis> (slower, performance impact for use, coherent between nodes).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315169" xreflabel=""/><emphasis role="bold">user_xattr</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315171" xreflabel=""/>Enables get/set of extended attributes by regular users. See the attr(5) manual page.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315177" xreflabel=""/><emphasis role="bold">nouser_xattr</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315179" xreflabel=""/>Disables use of extended attributes by regular users. Root and system processes can still use extended attributes.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315181" xreflabel=""/><emphasis role="bold">acl</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315183" xreflabel=""/>Enables POSIX Access Control List support. See the acl(5) manual page.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315185" xreflabel=""/><emphasis role="bold">noacl</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315187" xreflabel=""/>Disables Access Control List support.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1310887" xreflabel=""/>In addition to the standard mount options and backing disk type (e.g. ext3) options, Lustre understands the following server-specific options:</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1310890" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1310894" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310896" xreflabel=""/><emphasis role="bold">nosvc</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310900" xreflabel=""/> Starts the MGC (and MGS, if co-located) for a target service, not the actual service.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310902" xreflabel=""/><emphasis role="bold">nomsgs</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310906" xreflabel=""/> Starts only the MDT (with a co-located MGS), without starting the MGS.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310908" xreflabel=""/><emphasis role="bold">exclude=&lt;ostlist&gt;</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1310912" xreflabel=""/> Starts a client or MDT with a colon-separated list of known inactive OSTs.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315189" xreflabel=""/><emphasis role="bold">nosvc</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315193" xreflabel=""/> Only starts the MGC (and MGS, if co-located) for a target service, not the actual service.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315195" xreflabel=""/><emphasis role="bold">nomsgs</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315199" xreflabel=""/> Starts a MDT with a co-located MGS, without starting the MGS.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315201" xreflabel=""/><emphasis role="bold">exclude</emphasis>=<emphasis>ostlist</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315205" xreflabel=""/> Starts a client or MDT with a (colon-separated) list of known inactive OSTs.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315211" xreflabel=""/><emphasis role="bold">abort_recov</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315215" xreflabel=""/> Aborts client recovery and starts the target service immediately.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315217" xreflabel=""/><emphasis role="bold">md_stripe_cache_size</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315221" xreflabel=""/> Sets the stripe cache size for server-side disk with a striped RAID configuration.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315223" xreflabel=""/><emphasis role="bold">recovery_time_soft</emphasis>=<emphasis>timeout</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315227" xreflabel=""/> Allows <emphasis>timeout</emphasis> seconds for clients to reconnect for recovery after a server crash. This timeout is incrementally extended if it is about to expire and the server is still handling new connections from recoverable clients. The default soft recovery timeout is 300 seconds (5 minutes).</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315229" xreflabel=""/><emphasis role="bold">recovery_time_hard</emphasis>=<emphasis>timeout</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1315233" xreflabel=""/> The server is allowed to incrementally extend its timeout up to a hard maximum of <emphasis>timeout</emphasis> seconds. The default hard recovery timeout is set to 900 seconds (15 minutes).</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1310925" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1315242" xreflabel=""/>Starts a client for the Lustre file system testfs at mount point /mnt/myfilesystem. The Management Service is running on a node reachable from this client via the cfs21@tcp0 NID.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315243" xreflabel=""/>mount -t lustre cfs21@tcp0:/testfs /mnt/myfilesystem
</screen>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1315244" xreflabel=""/>Starts the Lustre metadata target service from /dev/sda1 on mount point /mnt/test/mdt.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315245" xreflabel=""/>mount -t lustre /dev/sda1 /mnt/test/mdt
</screen>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1315246" xreflabel=""/>Starts the testfs-MDT0000 service (using the disk label), but aborts the recovery process.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315247" xreflabel=""/>mount -t lustre -L testfs-MDT0000 -o abort_recov /mnt/test/mdt
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1315248" xreflabel=""/>See Also</title>

        <itemizedlist><listitem>
            <para>  <xref linkend="dbdoclet.50438219_75432"/></para>
            </listitem> <listitem>
            <para>  <xref linkend="dbdoclet.50438219_39574"/></para>
            </listitem> <listitem>
            <para>  <xref linkend="dbdoclet.50438219_38274"/></para>
            </listitem> <listitem>
            <para>  <xref linkend="dbdoclet.50438206_94597"/></para>
            </listitem>
        </itemizedlist>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_82679">
      <title>36.16 plot-<anchor xml:id="dbdoclet.50438219_marker-1317989" xreflabel=""/>llstat</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317991" xreflabel=""/>The plot-llstat utility plots Lustre statistics.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317992" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317993" xreflabel=""/>plot-llstat results_filename [parameter_index]
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317994" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317995" xreflabel=""/>The plot-llstat utility generates a CSV file and instruction files for gnuplot from the output of llstat. Since llstat is generic in nature, plot-llstat is also a generic script. The value of parameter_index can be 1 for count per interval, 2 for count per second (default setting) or 3 for total count.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317996" xreflabel=""/>The plot-llstat utility creates a .dat (CSV) file using the number of operations specified by the user. The number of operations equals the number of columns in the CSV file. The values in those columns are equal to the corresponding value of parameter_index in the output file.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317997" xreflabel=""/>The plot-llstat utility also creates a .scr file that contains instructions for gnuplot to plot the graph. After generating the .dat and .scr files, the plot-llstat tool invokes gnuplot to display the graph.</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318018" xreflabel=""/>Options</title>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318000" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1318004" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318006" xreflabel=""/><emphasis role="bold">results_filename</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318010" xreflabel=""/>Output generated by plot-llstat</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318012" xreflabel=""/><emphasis role="bold">parameter_index</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1318013" xreflabel=""/> </para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1318017" xreflabel=""/>Value of parameter_index can be:</para><para> 1 - count per interval</para><para> 2 - count per second (default setting)</para><para> 3 - total count</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1318019" xreflabel=""/>Example</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1318020" xreflabel=""/>llstat -i2 -g -c lustre-OST0000 &gt; log
<anchor xml:id="dbdoclet.50438219_pgfId-1318021" xreflabel=""/>plot-llstat log 3
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_51496">
      <title>36.17 router<anchor xml:id="dbdoclet.50438219_marker-1317921" xreflabel=""/>stat</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317923" xreflabel=""/>The routerstat utility prints Lustre router statistics.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317924" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317925" xreflabel=""/>routerstat [interval]
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317926" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317927" xreflabel=""/>The routerstat utility watches LNET router statistics. If no <emphasis>interval</emphasis> is specified, then statistics are sampled and printed only one time. Otherwise, statistics are sampled and printed at the specified <emphasis>interval</emphasis> (in seconds).</para>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317928" xreflabel=""/>Options</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317958" xreflabel=""/>The routerstat output includes the following fields:</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317931" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317933" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317935" xreflabel=""/><emphasis role="bold">M</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317937" xreflabel=""/>msgs_alloc(msgs_max)</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317939" xreflabel=""/><emphasis role="bold">E</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317941" xreflabel=""/>errors</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317943" xreflabel=""/><emphasis role="bold">S</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317945" xreflabel=""/>send_count/send_length</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317947" xreflabel=""/><emphasis role="bold">R</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317949" xreflabel=""/>recv_count/recv_length</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317951" xreflabel=""/><emphasis role="bold">F</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317953" xreflabel=""/>route_count/route_length</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317955" xreflabel=""/><emphasis role="bold">D</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317957" xreflabel=""/>drop_count/drop_length</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317959" xreflabel=""/>Files</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317960" xreflabel=""/>The routerstat utility extracts statistics data from:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317961" xreflabel=""/>/proc/sys/lnet/stats
</screen>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_39574">
      <title>36.18 tunefs.<anchor xml:id="dbdoclet.50438219_marker-1317076" xreflabel=""/>lustre</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1317078" xreflabel=""/>The tunefs.lustre utility modifies configuration information on a Lustre target disk.</para>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317079" xreflabel=""/>Synopsis</title>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317080" xreflabel=""/>tunefs.lustre [options] &lt;device&gt;
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317081" xreflabel=""/>Description</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317082" xreflabel=""/>tunefs.lustre is used to modify configuration information on a Lustre target disk. This includes upgrading old (pre-Lustre 1.6) disks. This does not reformat the disk or erase the target information, but modifying the configuration information can result in an unusable file system.</para>
        <informaltable frame="none">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="5*"/>
            <colspec colname="c2" colwidth="95*"/>
            
            
            <tbody>
              <row>
                <entry><para><inlinemediaobject><imageobject role="html">
                        <imagedata fileref="./shared/caution.gif" scalefit="1"/>
                      </imageobject>
<imageobject role="fo">
                        <imagedata contentdepth="100%" contentwidth="" depth="" fileref="./shared/caution.gif" scalefit="1" width="100%"/>
                      </imageobject>
</inlinemediaobject></para></entry>
                <entry><para><emphasis role="bold">Caution -</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1317083" xreflabel=""/>Changes made here affect a file system only when the target is mounted the next time.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1317084" xreflabel=""/>With tunefs.lustre, parameters are &quot;additive&quot; -- new parameters are specified in addition to old parameters, they do not replace them. To erase all old tunefs.lustre parameters and just use newly-specified parameters, run:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317085" xreflabel=""/>$ tunefs.lustre --erase-params --param=&lt;new parameters&gt; </screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317086" xreflabel=""/>The tunefs.lustre command can be used to set any parameter settable in a /proc/fs/lustre file and that has its own OBD device, so it can be specified as &lt;obd|fsname&gt;.&lt;obdtype&gt;.&lt;proc_file_name&gt;=&lt;value&gt;. For example:</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317087" xreflabel=""/>$ tunefs.lustre --param mdt.group_upcall=NONE /dev/sda1
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317089" xreflabel=""/>Options</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317193" xreflabel=""/>The tunefs.lustre options are listed and explained below.</para>
        <informaltable frame="all">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <thead>
              <row>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317092" xreflabel=""/>Option</emphasis></para></entry>
                <entry><para><emphasis role="bold"><anchor xml:id="dbdoclet.50438219_pgfId-1317096" xreflabel=""/>Description</emphasis></para></entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317098" xreflabel=""/><emphasis role="bold">--comment</emphasis>=<emphasis>comment</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317102" xreflabel=""/>Sets a user comment about this disk, ignored by Lustre.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317104" xreflabel=""/><emphasis role="bold">--dryrun</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317108" xreflabel=""/>Only prints what would be done; does not affect the disk.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317110" xreflabel=""/><emphasis role="bold">--erase-params</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317114" xreflabel=""/>Removes all previous parameter information.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317116" xreflabel=""/><emphasis role="bold">--failnode</emphasis>=<emphasis>nid</emphasis>,...</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317120" xreflabel=""/>Sets the NID(s) of a failover partner. This option can be repeated as needed.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317122" xreflabel=""/><emphasis role="bold">--fsname</emphasis>=<emphasis>filesystem_name</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317126" xreflabel=""/>The Lustre file system of which this service will be a part. The default file system name is 'lustreâ€.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317128" xreflabel=""/><emphasis role="bold">--index</emphasis>=index</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317132" xreflabel=""/>Forces a particular OST or MDT index.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317134" xreflabel=""/><emphasis role="bold">--mountfsoptions</emphasis>=opts</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317138" xreflabel=""/>Sets the mount options used when the backing file system is mounted.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317139" xreflabel=""/><emphasis role="bold">CAUTION</emphasis>: Unlike earlier versions of tunefs.lustre, this version completely replaces the existing mount options with those specified on the command line, and issues a warning on stderr if any default mount options are omitted.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317140" xreflabel=""/>The defaults for ldiskfs are:</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317141" xreflabel=""/>OST: <emphasis>errors=remount-ro,mballoc,extents</emphasis>;</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317142" xreflabel=""/>MGS/MDT: <emphasis>errors=remount-ro,iopen_nopriv,user_xattr</emphasis></para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317143" xreflabel=""/>Do not alter the default mount options unless you know what you are doing.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317145" xreflabel=""/><emphasis role="bold">--network</emphasis>=net,...</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317149" xreflabel=""/>Network(s) to which to restrict this OST/MDT. This option can be repeated as necessary.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317151" xreflabel=""/><emphasis role="bold">--mgs</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317155" xreflabel=""/>Adds a configuration management service to this target.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317157" xreflabel=""/><emphasis role="bold">--msgnode</emphasis>=<emphasis>nid</emphasis>,...</para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317161" xreflabel=""/>Sets the NID(s) of the MGS node; required for all targets other than the MGS.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317163" xreflabel=""/><emphasis role="bold">--nomgs</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317167" xreflabel=""/>Removes a configuration management service to this target.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317169" xreflabel=""/><emphasis role="bold">--quiet</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317173" xreflabel=""/>Prints less information.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317175" xreflabel=""/><emphasis role="bold">--verbose</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317179" xreflabel=""/>Prints more information.</para></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317181" xreflabel=""/><emphasis role="bold">--writeconf</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1317185" xreflabel=""/>Erases all configuration logs for the file system to which this MDT belongs, and regenerates them. This is dangerous operation. All clients must be unmounted and servers for this file system should be stopped. All targets (OSTs/MDTs) must then be restarted to regenerate the logs. No clients should be started until all targets have restarted.</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317186" xreflabel=""/> </para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317187" xreflabel=""/>The correct order of operations is:</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317188" xreflabel=""/>* Unmount all clients on the file system</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317189" xreflabel=""/>* Unmount the MDT and all OSTs on the file system</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317190" xreflabel=""/>* Run <emphasis role="bold">tunefs.lustre --writeconf &lt;device&gt;</emphasis> on every server</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317191" xreflabel=""/>* Mount the MDT and OSTs</para><para><anchor xml:id="dbdoclet.50438219_pgfId-1317192" xreflabel=""/>* Mount the clients</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317194" xreflabel=""/>Examples</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317195" xreflabel=""/>Change the MGS's NID address. (This should be done on each target disk, since they should all contact the same MGS.)</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317196" xreflabel=""/>tunefs.lustre --erase-param --mgsnode=&lt;new_nid&gt; --writeconf /dev/sda
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1317197" xreflabel=""/>Add a failover NID location for this target.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1317198" xreflabel=""/>tunefs.lustre --param=&quot;failover.node=192.168.0.13@tcp0&quot; /dev/sda 
</screen>
      </section>
      <section remap="h5">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1317199" xreflabel=""/>See Also</title>
        <itemizedlist>
            <listitem>
        <para><xref linkend="dbdoclet.50438219_75432"/></para>
        </listitem> <listitem>
            <para><xref linkend="dbdoclet.50438219_12635"/></para>
        </listitem> <listitem>
            <para><xref linkend="dbdoclet.50438219_38274"/></para>
        </listitem> <listitem>
            <para><xref linkend="dbdoclet.50438206_94597"/></para>
        </listitem>
        </itemizedlist>
      </section>
    </section>
    <section xml:id="dbdoclet.50438219_99928">
      <title>36.19 Additional System <anchor xml:id="dbdoclet.50438219_marker-1313048" xreflabel=""/>Configuration Utilities</title>
      <para><anchor xml:id="dbdoclet.50438219_pgfId-1294808" xreflabel=""/>This section describes additional system configuration utilities for Lustre.</para>
      <section remap="h3">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1294829" xreflabel=""/>36.19.1 Application <anchor xml:id="dbdoclet.50438219_marker-1313051" xreflabel=""/>Profiling Utilities</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294830" xreflabel=""/>The following utilities are located in /usr/bin.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294832" xreflabel=""/><emphasis role="bold">lustre_req_history.sh</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294833" xreflabel=""/>The lustre_req_history.sh utility (run from a client), assembles as much Lustre RPC request history as possible from the local node and from the servers that were contacted, providing a better picture of the coordinated network activity.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294835" xreflabel=""/><emphasis role="bold">llstat.sh</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294836" xreflabel=""/>The llstat.sh utility (improved in Lustre 1.6), handles a wider range of /proc files, and has command line switches to produce more graphable output.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294838" xreflabel=""/><emphasis role="bold">plot-llstat.sh</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294839" xreflabel=""/>The plot-llstat.sh utility plots the output from llstat.sh using gnuplot.</para>
      </section>
      <section remap="h3">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1294840" xreflabel=""/>36.19.2 More /proc Statistics for <anchor xml:id="dbdoclet.50438219_marker-1313052" xreflabel=""/>Application Profiling</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294841" xreflabel=""/>The following utilities provide additional statistics.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294843" xreflabel=""/><emphasis role="bold">vfs_ops_stats</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294844" xreflabel=""/>The client vfs_ops_stats utility tracks Linux VFS operation calls into Lustre for a single PID, PPID, GID or everything.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294845" xreflabel=""/>/proc/fs/lustre/llite/*/vfs_ops_stats
<anchor xml:id="dbdoclet.50438219_pgfId-1294846" xreflabel=""/>/proc/fs/lustre/llite/*/vfs_track_[pid|ppid|gid]
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294848" xreflabel=""/><emphasis role="bold">extents_stats</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294849" xreflabel=""/>The client extents_stats utility shows the size distribution of I/O calls from the client (cumulative and by process).</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294850" xreflabel=""/>/proc/fs/lustre/llite/*/extents_stats, extents_stats_per_process
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294852" xreflabel=""/><emphasis role="bold">offset_stats</emphasis></para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294853" xreflabel=""/>The client offset_stats utility shows the read/write seek activity of a client by offsets and ranges.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294854" xreflabel=""/>/proc/fs/lustre/llite/*/offset_stats
</screen>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294855" xreflabel=""/>Lustre 1.6 included per-client and improved MDT statistics:</para>
        <itemizedlist><listitem>
            <para><anchor xml:id="dbdoclet.50438219_pgfId-1294856" xreflabel=""/> Per-client statistics tracked on the servers</para>
          </listitem>

</itemizedlist>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294857" xreflabel=""/>Each MDT and OST now tracks LDLM and operations statistics for every connected client, for comparisons and simpler collection of distributed job statistics.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294858" xreflabel=""/>/proc/fs/lustre/mds|obdfilter/*/exports/
</screen>
        <itemizedlist><listitem>
            <para><anchor xml:id="dbdoclet.50438219_pgfId-1294859" xreflabel=""/> Improved MDT statistics</para>
          </listitem>

</itemizedlist>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294860" xreflabel=""/>More detailed MDT operations statistics are collected for better profiling.</para>
        <screen><anchor xml:id="dbdoclet.50438219_pgfId-1294861" xreflabel=""/>/proc/fs/lustre/mds/*/stats
</screen>
      </section>
      <section remap="h3">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1294862" xreflabel=""/>36.19.3 Testing / Debugging <anchor xml:id="dbdoclet.50438219_marker-1313053" xreflabel=""/>Utilities</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1294863" xreflabel=""/>Lustre offers the following test and debugging utilities.</para>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1311299" xreflabel=""/>loadgen</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311300" xreflabel=""/>The Load Generator (loadgen) is a test program designed to simulate large numbers of Lustre clients connecting and writing to an OST. The loadgen utility is located at lustre/utils/loadgen (in a build directory) or at /usr/sbin/loadgen (from an RPM).</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1312081" xreflabel=""/>Loadgen offers the ability to run this test:</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311221" xreflabel=""/> 1. Start an arbitrary number of (echo) clients.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311232" xreflabel=""/> 2. Start and connect to an echo server, instead of a real OST.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311226" xreflabel=""/> 3. Create/bulk_write/delete objects on any number of echo clients simultaneously.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311244" xreflabel=""/>Currently, the maximum number of clients is limited by MAX_OBD_DEVICES and the amount of memory available.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1311320" xreflabel=""/>Usage</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311311" xreflabel=""/>The loadgen utility can be run locally on the OST server machine or remotely from any LNET host. The device command can take an optional NID as a parameter; if unspecified, the first local NID found is used.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311331" xreflabel=""/>The obdecho module must be loaded by hand before running loadgen.</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1311341" xreflabel=""/># cd lustre/utils/ 
<anchor xml:id="dbdoclet.50438219_pgfId-1311420" xreflabel=""/># insmod ../obdecho/obdecho.ko 
<anchor xml:id="dbdoclet.50438219_pgfId-1311423" xreflabel=""/># ./loadgen 
<anchor xml:id="dbdoclet.50438219_pgfId-1311426" xreflabel=""/>loadgen&gt; h 
<anchor xml:id="dbdoclet.50438219_pgfId-1311429" xreflabel=""/>This is a test program used to simulate large numbers of clients. The echo \
obds are used, so the obdecho module must be loaded. 
<anchor xml:id="dbdoclet.50438219_pgfId-1311436" xreflabel=""/> 
<anchor xml:id="dbdoclet.50438219_pgfId-1311437" xreflabel=""/>Typical usage would be: 
<anchor xml:id="dbdoclet.50438219_pgfId-1311440" xreflabel=""/>loadgen&gt; dev lustre-OST0000       set the target device 
<anchor xml:id="dbdoclet.50438219_pgfId-1311443" xreflabel=""/>loadgen&gt; start 20                 start 20 echo clients 
<anchor xml:id="dbdoclet.50438219_pgfId-1311446" xreflabel=""/>loadgen&gt; wr 10 5                  have 10 clients do simultaneous brw_write \
tests 5 times each 
<anchor xml:id="dbdoclet.50438219_pgfId-1311451" xreflabel=""/> 
<anchor xml:id="dbdoclet.50438219_pgfId-1311452" xreflabel=""/>Available commands are: 
<anchor xml:id="dbdoclet.50438219_pgfId-1311462" xreflabel=""/>   device 
<anchor xml:id="dbdoclet.50438219_pgfId-1311472" xreflabel=""/>   dl 
<anchor xml:id="dbdoclet.50438219_pgfId-1311482" xreflabel=""/>   echosrv 
<anchor xml:id="dbdoclet.50438219_pgfId-1311492" xreflabel=""/>   start 
<anchor xml:id="dbdoclet.50438219_pgfId-1311502" xreflabel=""/>   verbose 
<anchor xml:id="dbdoclet.50438219_pgfId-1311512" xreflabel=""/>   wait 
<anchor xml:id="dbdoclet.50438219_pgfId-1311522" xreflabel=""/>   write 
<anchor xml:id="dbdoclet.50438219_pgfId-1311532" xreflabel=""/>   help 
<anchor xml:id="dbdoclet.50438219_pgfId-1311542" xreflabel=""/>   exit 
<anchor xml:id="dbdoclet.50438219_pgfId-1311552" xreflabel=""/>   quit 
<anchor xml:id="dbdoclet.50438219_pgfId-1311557" xreflabel=""/> 
<anchor xml:id="dbdoclet.50438219_pgfId-1311558" xreflabel=""/>For more help type: help command-name 
<anchor xml:id="dbdoclet.50438219_pgfId-1311561" xreflabel=""/>loadgen&gt; 
<anchor xml:id="dbdoclet.50438219_pgfId-1311564" xreflabel=""/>loadgen&gt; device lustre-OST0000 192.168.0.21@tcp 
<anchor xml:id="dbdoclet.50438219_pgfId-1311567" xreflabel=""/>Added uuid OSS_UUID: 192.168.0.21@tcp 
<anchor xml:id="dbdoclet.50438219_pgfId-1311570" xreflabel=""/>Target OST name is &apos;lustre-OST0000&apos; 
<anchor xml:id="dbdoclet.50438219_pgfId-1311573" xreflabel=""/>loadgen&gt; 
<anchor xml:id="dbdoclet.50438219_pgfId-1311576" xreflabel=""/>loadgen&gt; st 4 
<anchor xml:id="dbdoclet.50438219_pgfId-1311579" xreflabel=""/>start 0 to 4 
<anchor xml:id="dbdoclet.50438219_pgfId-1311582" xreflabel=""/>./loadgen: running thread #1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311585" xreflabel=""/>./loadgen: running thread #2 
<anchor xml:id="dbdoclet.50438219_pgfId-1311588" xreflabel=""/>./loadgen: running thread #3 
<anchor xml:id="dbdoclet.50438219_pgfId-1311591" xreflabel=""/>./loadgen: running thread #4 
<anchor xml:id="dbdoclet.50438219_pgfId-1311594" xreflabel=""/>loadgen&gt; wr 4 5 
<anchor xml:id="dbdoclet.50438219_pgfId-1311597" xreflabel=""/>Estimate 76 clients before we run out of grant space (155872K / 2097152) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311600" xreflabel=""/>1: i0 
<anchor xml:id="dbdoclet.50438219_pgfId-1311603" xreflabel=""/>2: i0 
<anchor xml:id="dbdoclet.50438219_pgfId-1311606" xreflabel=""/>4: i0 
<anchor xml:id="dbdoclet.50438219_pgfId-1311609" xreflabel=""/>3: i0 
<anchor xml:id="dbdoclet.50438219_pgfId-1311612" xreflabel=""/>1: done (0) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311615" xreflabel=""/>2: done (0) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311618" xreflabel=""/>4: done (0) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311621" xreflabel=""/>3: done (0) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311624" xreflabel=""/>wrote 25MB in 1.419s (17.623 MB/s) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311627" xreflabel=""/>loadgen&gt; 
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311630" xreflabel=""/>The loadgen utility prints periodic status messages; message output can be controlled with the verbose command.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311657" xreflabel=""/>To insure that a file can be written to (a requirement of write cache), OSTs reserve (&quot;grants&quot;), chunks of space for each newly-created file. A grant may cause an OST to report that it is out of space, even though there is plenty of space on the disk, because the space is &quot;reserved&quot; by other files. The loadgen utility estimates the number of simultaneous open files as the disk size divided by the grant size and reports that number when the write tests are first started.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311332" xreflabel=""/><emphasis role="bold">Echo Server</emphasis></para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311333" xreflabel=""/>The loadgen utility can start an echo server. On another node, loadgen can specify the echo server as the device, thus creating a network-only test environment.</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1311700" xreflabel=""/>loadgen&gt; echosrv 
<anchor xml:id="dbdoclet.50438219_pgfId-1311723" xreflabel=""/>loadgen&gt; dl 
<anchor xml:id="dbdoclet.50438219_pgfId-1311730" xreflabel=""/>   0 UP obdecho echosrv echosrv 3 
<anchor xml:id="dbdoclet.50438219_pgfId-1311734" xreflabel=""/>   1 UP ost OSS OSS 3 
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311335" xreflabel=""/>On another node:</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1311752" xreflabel=""/>loadgen&gt; device echosrv cfs21@tcp 
<anchor xml:id="dbdoclet.50438219_pgfId-1311785" xreflabel=""/>Added uuid OSS_UUID: 192.168.0.21@tcp 
<anchor xml:id="dbdoclet.50438219_pgfId-1311788" xreflabel=""/>Target OST name is &apos;echosrv&apos; 
<anchor xml:id="dbdoclet.50438219_pgfId-1311791" xreflabel=""/>loadgen&gt; st 1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311794" xreflabel=""/>start 0 to 1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311797" xreflabel=""/>./loadgen: running thread #1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311800" xreflabel=""/>loadgen&gt; wr 1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311803" xreflabel=""/>start a test_brw write test on X clients for Y iterations 
<anchor xml:id="dbdoclet.50438219_pgfId-1311806" xreflabel=""/>usage: write &lt;num_clients&gt; &lt;num_iter&gt; [&lt;delay&gt;] 
<anchor xml:id="dbdoclet.50438219_pgfId-1311809" xreflabel=""/>loadgen&gt; wr 1 1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311812" xreflabel=""/>loadgen&gt; 
<anchor xml:id="dbdoclet.50438219_pgfId-1311815" xreflabel=""/>1: i0 
<anchor xml:id="dbdoclet.50438219_pgfId-1311818" xreflabel=""/>1: done (0) 
<anchor xml:id="dbdoclet.50438219_pgfId-1311821" xreflabel=""/>wrote 1MB in 0.029s (34.023 MB/s)
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311750" xreflabel=""/>Scripting</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311747" xreflabel=""/>The threads all perform their actions in non-blocking mode; use the wait command to block for the idle state. For example:</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1311833" xreflabel=""/>#!/bin/bash 
<anchor xml:id="dbdoclet.50438219_pgfId-1311852" xreflabel=""/>./loadgen &lt;&lt; EOF 
<anchor xml:id="dbdoclet.50438219_pgfId-1311855" xreflabel=""/>device lustre-OST0000 
<anchor xml:id="dbdoclet.50438219_pgfId-1311858" xreflabel=""/>st 1 
<anchor xml:id="dbdoclet.50438219_pgfId-1311864" xreflabel=""/>wr 1 10 
<anchor xml:id="dbdoclet.50438219_pgfId-1311863" xreflabel=""/>wait 
<anchor xml:id="dbdoclet.50438219_pgfId-1311867" xreflabel=""/>quit 
<anchor xml:id="dbdoclet.50438219_pgfId-1311870" xreflabel=""/>EOF 
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311749" xreflabel=""/><emphasis role="bold">Feature Requests</emphasis></para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1311881" xreflabel=""/>The loadgen utility is intended to grow into a more comprehensive test tool; feature requests are encouraged. The current feature requests include:</para>
          <itemizedlist><listitem>
              <para><anchor xml:id="dbdoclet.50438219_pgfId-1311883" xreflabel=""/> Locking simulation</para>
            </listitem>
<listitem>
              <itemizedlist><listitem>
                  <para><anchor xml:id="dbdoclet.50438219_pgfId-1311917" xreflabel=""/> Many (echo) clients cache locks for the specified resource at the same time.</para>
                </listitem>

<listitem>
                  <para><anchor xml:id="dbdoclet.50438219_pgfId-1311927" xreflabel=""/> Many (echo) clients enqueue locks for the specified resource simultaneously.</para>
                </listitem>

</itemizedlist>
            </listitem>
<listitem>
              <para><anchor xml:id="dbdoclet.50438219_pgfId-1311888" xreflabel=""/> obdsurvey functionality</para>
            </listitem>
<listitem>
              <itemizedlist><listitem>
                  <para><anchor xml:id="dbdoclet.50438219_pgfId-1311941" xreflabel=""/> Fold the Lustre I/O kit's obdsurvey script functionality into loadgen</para>
                </listitem>

</itemizedlist>
            </listitem>
</itemizedlist>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1315452" xreflabel=""/>llog_reader</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1315453" xreflabel=""/>The llog_reader utility translates a Lustre configuration log into human-readable form.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1315454" xreflabel=""/>Synopsis</title>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315455" xreflabel=""/>llog_reader filename
</screen>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1315458" xreflabel=""/>Description</title>
          <para>llog_reader parses the binary format of Lustre's on-disk configuration logs. It can only read the logs. Use tunefs.lustre to write to them.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1315459" xreflabel=""/>To examine a log file on a stopped Lustre server, mount its backing file system as ldiskfs, then use llog_reader to dump the log file's contents. For example:</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315460" xreflabel=""/>mount -t ldiskfs /dev/sda /mnt/mgs 
<anchor xml:id="dbdoclet.50438219_pgfId-1315461" xreflabel=""/>llog_reader /mnt/mgs/CONFIGS/tfs-client
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1315462" xreflabel=""/>To examine the same log file on a running Lustre server, use the ldiskfs-enabled debugfs utility (called debug.ldiskfs on some distributions) to extract the file. For example:</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1315463" xreflabel=""/>debugfs -c -R 'dump CONFIGS/tfs-client /tmp/tfs-client' /dev/sda 
<anchor xml:id="dbdoclet.50438219_pgfId-1315464" xreflabel=""/>llog_reader /tmp/tfs-client
</screen>
          <informaltable frame="none">
            <tgroup cols="2">
              <colspec colname="c1" colwidth="5*"/>
              <colspec colname="c2" colwidth="95*"/>
              
              
              <tbody>
                <row>
                  <entry><para><inlinemediaobject><imageobject role="html">
                          <imagedata fileref="./shared/caution.gif" scalefit="1"/>
                        </imageobject>
<imageobject role="fo">
                          <imagedata contentdepth="100%" contentwidth="" depth="" fileref="./shared/caution.gif" scalefit="1" width="100%"/>
                        </imageobject>
</inlinemediaobject></para></entry>
                  <entry><para><emphasis role="bold">Caution -</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1315476" xreflabel=""/>Although they are stored in the CONFIGS directory, mountdata files do not use the config log format and will confuse llog_reader.</para></entry>
                </row>
              </tbody>
            </tgroup>
          </informaltable>
           <para><anchor xml:id="dbdoclet.50438219_pgfId-1315477" xreflabel=""/><emphasis role="bold">See Also</emphasis></para>
           <para><anchor xml:id="dbdoclet.50438219_pgfId-1315478" xreflabel=""/><xref linkend="dbdoclet.50438219_39574"/></para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1294873" xreflabel=""/>lr_reader</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1294874" xreflabel=""/>The lr_reader utility translates a last received (last_rcvd) file into human-readable form.</para>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318389" xreflabel=""/>The following utilites are part of the Lustre I/O kit. For more information, see <xref linkend='benchmarkingtests'/>.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1318396" xreflabel=""/>sgpdd_survey</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318397" xreflabel=""/>The sgpdd_survey utility tests &apos;bare metal&apos; performance, bypassing as much of the kernel as possible. The sgpdd_survey tool does not require Lustre, but it does require the sgp_dd package.</para>
          <informaltable frame="none">
            <tgroup cols="2">
              <colspec colname="c1" colwidth="5*"/>
              <colspec colname="c2" colwidth="95*"/>
              
              
              <tbody>
                <row>
                  <entry><para><inlinemediaobject><imageobject role="html">
                          <imagedata fileref="./shared/caution.gif" scalefit="1"/>
                        </imageobject>
<imageobject role="fo">
                          <imagedata contentdepth="100%" contentwidth="" depth="" fileref="./shared/caution.gif" scalefit="1" width="100%"/>
                        </imageobject>
</inlinemediaobject></para></entry>
                  <entry><para><emphasis role="bold">Caution -</emphasis><anchor xml:id="dbdoclet.50438219_pgfId-1318398" xreflabel=""/>The sgpdd_survey utility erases all data on the device.</para></entry>
                </row>
              </tbody>
            </tgroup>
          </informaltable>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1318399" xreflabel=""/>obdfilter_survey</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318400" xreflabel=""/>The obdfilter_survey utility is a shell script that tests performance of isolated OSTS, the network via echo clients, and an end-to-end test.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1318401" xreflabel=""/>ior-survey</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318402" xreflabel=""/>The ior-survey utility is a script used to run the IOR benchmark. Lustre includes IOR version 2.8.6.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1318403" xreflabel=""/>ost_survey</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318404" xreflabel=""/>The ost_survey utility is an OST performance survey that tests client-to-disk performance of the individual OSTs in a Lustre file system.</para>
        </section>
        <section remap="h5">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1318405" xreflabel=""/>stats-collect</title>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1318406" xreflabel=""/>The stats-collect utility contains scripts used to collect application profiling information from Lustre clients and servers.</para>
        </section>
      </section>
      <section remap="h3">
        <title><anchor xml:id="dbdoclet.50438219_pgfId-1295755" xreflabel=""/>36.19.4 Flock <anchor xml:id="dbdoclet.50438219_marker-1295910" xreflabel=""/>Feature</title>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1295756" xreflabel=""/>Lustre now includes the flock feature, which provides file locking support. Flock describes classes of file locks known as 'flocks'. Flock can apply or remove a lock on an open file as specified by the user. However, a single file may not, simultaneously, have both shared and exclusive locks.</para>
        <para><anchor xml:id="dbdoclet.50438219_pgfId-1295757" xreflabel=""/>By default, the flock utility is disabled on Lustre. Two modes are available.</para>
         <informaltable frame="none">
          <tgroup cols="2">
            <colspec colname="c1" colwidth="50*"/>
            <colspec colname="c2" colwidth="50*"/>
            <tbody>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1295805" xreflabel=""/><emphasis role="bold">local mode</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1295807" xreflabel=""/> In this mode, locks are coherent on one node (a single-node flock), but not across all clients. To enable it, use -o localflock. This is a client-mount option.</para><note><para>This mode does not impact performance and is appropriate for single-node databases.</para></note></entry>
              </row>
              <row>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1295809" xreflabel=""/><emphasis role="bold">consistent mode</emphasis></para></entry>
                <entry><para> <anchor xml:id="dbdoclet.50438219_pgfId-1312474" xreflabel=""/>In this mode, locks are coherent across all clients.</para><para> To enable it, use the -o flock. This is a client-mount option.</para><para><emphasis role="bold">CAUTION</emphasis>: This mode affects the performance of the file being flocked and may affect stability, depending on the Lustre version used. Consider using a newer Lustre version which is more stable. If the consistent mode is enabled and no applications are using flock, then it has no effect.</para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
         <para><anchor xml:id="dbdoclet.50438219_pgfId-1295883" xreflabel=""/>A call to use flock may be blocked if another process is holding an incompatible lock. Locks created using flock are applicable for an open file table entry. Therefore, a single process may hold only one type of lock (shared or exclusive) on a single file. Subsequent flock calls on a file that is already locked converts the existing lock to the new lock mode.</para>
        <section remap="h4">
          <title><anchor xml:id="dbdoclet.50438219_pgfId-1295763" xreflabel=""/>36.19.4.1 Example</title>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1295764" xreflabel=""/>$ mount -t lustre -o flock mds@tcp0:/lustre /mnt/client
</screen>
          <para><anchor xml:id="dbdoclet.50438219_pgfId-1295765" xreflabel=""/>You can check it in /etc/mtab. It should look like,</para>
          <screen><anchor xml:id="dbdoclet.50438219_pgfId-1295766" xreflabel=""/>mds@tcp0:/lustre /mnt/client lustre rw,flock         0       0
</screen>
        </section>
      </section>
    </section>
</chapter>
