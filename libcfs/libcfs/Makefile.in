MODULES = libcfs

libcfs-linux-objs := linux-prim.o
libcfs-linux-objs += linux-hash.o
libcfs-linux-objs += linux-wait.o
libcfs-linux-objs += xarray.o

libcfs-crypto-objs := crypto.o fname.o hkdf.o hooks.o keyring.o
libcfs-crypto-objs += keysetup.o keysetup_v1.o policy.o bio.o

default: all

libcfs-linux-objs := $(addprefix linux/,$(libcfs-linux-objs))
libcfs-crypto-objs := $(addprefix crypto/,$(libcfs-crypto-objs))

libcfs-objs-$(CONFIG_SMP) = libcfs_cpu.o
libcfs-all-objs := debug.o fail.o module.o tracefile.o \
		   libcfs_string.o hash.o \
		   workitem.o \
		   libcfs_mem.o libcfs_lock.o \
		   linux-crypto.o linux-crypto-adler.o \
		   $(libcfs-objs-y)

libcfs-objs := $(libcfs-linux-objs) $(libcfs-all-objs)
@LLCRYPT_TRUE@libcfs-objs += $(libcfs-crypto-objs)

EXTRA_PRE_CFLAGS := -I@LUSTRE@/../libcfs/libcfs

@INCLUDE_RULES@
